{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/ExportImageParameters.js","../node_modules/@arcgis/core/symbols/support/previewSymbol3D.js","../node_modules/@arcgis/core/renderers/support/rendererConversion.js","../node_modules/@arcgis/core/widgets/Legend/support/clusterUtils.js","../node_modules/@arcgis/core/renderers/support/numberUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/utils.js","../node_modules/@arcgis/core/widgets/Legend/support/colorRampUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/relationshipRampUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js","../node_modules/@arcgis/core/widgets/Legend/LegendViewModel.js","../node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js","../node_modules/@arcgis/core/widgets/Legend/styles/support/univariateUtils.js","../node_modules/@arcgis/core/widgets/Legend/support/styleUtils.js","../node_modules/@arcgis/core/widgets/Legend/styles/Card.js","../node_modules/@arcgis/core/widgets/Legend/styles/Classic.js","../node_modules/@arcgis/core/widgets/Legend.js","../node_modules/@arcgis/core/layers/support/sublayerUtils.js"],"names":["l","visible","definitionExpression","labelingInfo","labelsVisible","opacity","minScale","maxScale","renderer","source","n","e","scale","this","layer","hasDynamicLayers","visibleSublayers","map","toExportImageJSON","length","JSON","stringify","o","serviceSublayers","_get","_set","handles","remove","add","allSublayers","on","notifyChange","propertyName","id","join","filter","reduce","r","commitProperty","sublayers","forEach","s","t","i","a","unshift","some","dpi","format","imageFormat","transparent","imageTransparency","gdbVersion","dynamicLayers","layers","layerDefs","readOnly","prototype","type","Number","U","D","E","getLogger","C","outline","material","color","toHex","width","size","toRgba","Math","min","q","h","v","c","g","u","b","A","H","m","N","style","toCss","x","y","src","height","T","$","B","F","x1","y1","x2","y2","colors","offset","Q","p","maxSize","disableUpsampling","symbolLayers","getItemAt","ceil","resource","href","thumbnail","url","Promise","resolve","S","styleOrigin","styleName","styleUrl","z","portal","catch","then","Z","get","K","j","max","shape","fill","stroke","push","symbolConfig","isTall","depth","G","primitive","cx","cy","path","command","values","w","k","d","J","value","error","warn","L","node","pattern","f","M","X","reject","P","I","profile","pathSymbol3DLayer","V","W","visualVariables","find","featuresTilingScheme","getClosestInfoForScale","level","levels","field","minSize","minDataValue","maxDataValue","toFixed","previous","next","String","match","integer","split","fractional","toLowerCase","indexOf","abs","floor","slice","tolerance","strictBounds","indexes","sort","maximumFractionDigits","stops","label","all","getColor","reverse","getOpacity","startIndex","endIndex","weight","blendColors","colorStops","ratio","HH","HL","LL","LH","top","bottom","left","right","focus","infos","numClasses","symbol","labels","rotation","legendOptions","customValues","target","authoringInfo","O","univariateTheme","outlineSize","classBreakInfos","clone","uniqueValueInfos","getSizeRangeAtScale","getSize","view","declaredClass","font","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultiPatch","u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64","MAX_VALUE","Y","ee","te","le","se","ne","ie","re","ae","oe","de","ce","ye","ue","he","me","pe","fe","ge","be","Se","_e","ve","Le","we","Ee","Ie","Ce","Re","Fe","Te","_handles","_hasColorRamp","_hasOpacityRamp","_hasSizeRamp","_webStyleSymbolCache","Map","_dotDensityUrlCache","_scaleDrivenSizeVariable","_hasClusterSizeVariable","children","layerView","legendElements","parent","keepCacheOnDestroy","respectLayerVisibility","sublayerIds","title","added","removed","uid","destroy","_getParentLayerOpacity","_isGroupActive","featureReduction","test","_isScaleDrivenSizeVariable","_isLayerScaleDriven","_getRendererLegendElements","featureSet","features","layerDefinition","drawingInfo","read","geometryType","name","_constructLegendElementsForWMTSlayer","_constructLegendElementsForWMSSublayers","_constructLegendElementsForBuildingSceneLayer","_constructLegendElementsForSublayers","renderingRule","functionName","bandIds","_getLegendLayers","watch","default","buildLegendElementsForRenderer","buildLegendElementsForTools","_generateSymbolTableElementForLegendLayer","ready","expression","valueExpression","loaded","sourceJSON","mapLayerId","activeLayer","styleId","styles","legendUrl","customParameters","customLayerParameters","_generateLegendElementsForWMSSublayers","toArray","legendEnabled","_generateSymbolTableElementForWMSSublayer","_generateSymbolTableElementForLegendUrl","responseType","data","preview","_legendRequest","exportImageServiceParameters","toJSON","raster","viewId","replace","version","substring","encodeURI","query","_generateLegendElementsForBuildingSublayers","sublayer","_generateLegendElementsForSublayers","findSublayerById","Boolean","_isSublayerInScale","originIdOf","load","_generateSymbolTableElementForSublayer","_","set","layerId","legend","_isLegendLayerInScale","layerName","_getRendererTitle","legendType","_sanitizeLegendForSublayer","legendGroups","heading","_generateSymbolTableElementInfosForLegendLayer","groupId","imageData","tileInfo","lods","splice","_constructPointCloudRendererLegendElements","_constructDotDensityRendererLegendElements","_constructRendererLegendElements","_getPointCloudRendererTitle","colorClassBreakInfos","minValue","maxValue","_getAppliedCloneSymbol","colorUniqueValueInfos","concat","_getSymbolPreview","applyColorModulation","colorModulation","backgroundColor","dotSize","has","R","calculateDotValue","unit","round","attributes","_getElementInfoForDotDensity","valueExpressionTitle","_loadRenderer","_getVisualVariableLegendElements","Set","findIndex","field1","field2","normalizationField","_getFieldAlias","normField","angle","_getDomainName","defaultSymbol","defaultLabel","_isUnclassedRenderer","_updateInfosforClassedSizeRenderer","tileType","_getServerSideLegend","_constructTileImageryStretchRendererElements","statistics","outputMin","outputMax","generateRasterInfo","serviceRasterInfo","keyProperties","BandProperties","bandCount","_getStretchLegendElements","BandName","_createSymbolTableElementMultiBand","colormapInfos","pointSymbol","lineSymbol","polygonSymbol","outputUnit","attributeField","getClassBreakInfos","getDefaultSymbol","_isTallSymbol","_getAllInfos","applyScaleDrivenSize","isSquareFill","setTimeout","rasterInfo","pixelType","hasStandardTime","getStandardTimeValue","Array","from","keys","colorRamps","toColor","fromColor","colorRamp","colorName","bandName","axis","_effectiveRenderer","clusterMinSize","clusterMaxSize","showLegend","_getMedianColor","_fetchSymbol","apply","_applySymbolToRenderer","user","username","fetchCIMSymbol","fetchSymbol","_applyColorTo3dSymbol","_getRampTitle","getField","_getClusterTitle","getFieldDomain","getName","popupTemplate","fieldInfos","fieldName","showCount","ratioPercent","ratioPercentTotal","normalizationType","normByPct","fieldsIndex","alias","dependsOn","Ve","ofType","_layerViewByLayerId","_layerInfosByLayerViewId","_activeLayerInfosByLayerViewId","_activeLayerInfosWithNoParent","activeLayerInfos","basemapLegendVisible","groundLegendVisible","layerInfos","_viewHandles","_refresh","_destroyViewActiveLayerInfos","_stateHandles","_resetAll","state","_watchPropertiesAndAllLayerViews","removeAll","Object","_destroyViewActiveLayerInfo","allLayerViews","_allLayerViewsChangeHandle","bind","_propertiesChangeHandle","_generateLayerViews","_filterLayerViewsByLayerInfos","_isLayerViewSupported","_generateActiveLayerInfo","_sortActiveLayerInfos","removeMany","_filterLayerViews","_collectLayerViews","_hasLayerInfo","_isLayerUIDMatching","_hasLayerUID","includes","_isLayerActive","_buildActiveLayerInfo","_layerActiveHandle","_titleHandle","_constructLegendElements","_scaleHandle","_legendEnabledHandle","isScaleDriven","_addActiveLayerInfo","_removeActiveLayerInfo","featureCollections","buildLegendElementsForFeatureCollections","sqrt","class","xmlns","markerWidth","markerHeight","refX","refY","markerUnits","orient","points","transform","markerStart","markerEnd","document","createElement","className","toString","append","tagName","appendChild","align","rampAlignment","sizeRampElement","colorRampElement","dotValue","clusterCountTitle","window","devicePixelRatio","_hasIndicators","_selectedSectionName","_sectionNames","_sectionMap","headingLevel","layout","messages","messagesCommon","own","_watchForSectionChanges","container","clientWidth","_renderLegendForLayer","pagination","pageText","index","total","key","role","tabIndex","onclick","_selectSection","onkeydown","_focusSection","classes","noLegend","getAttribute","_switchSectionOnArrowPress","getElementById","_generateSectionNames","_generateSectionNamesForActiveLayerInfo","_getSectionName","_renderLegendForElement","_renderLegendForElementInfo","properties","_renderLegendForRamp","_renderSizeRamp","_renderUnivariateAboveAndBelowRamp","_renderUnivariateColorSizeRamp","marginTop","marginLeft","display","flexDirection","justifyContent","afterCreate","isBright","background","textShadow","border","_renderImage","alt","getContext","beginPath","moveTo","lineTo","strokeStyle","marginBottom","marginRight","cloneNode","_renderSizeRampLines","alignItems","verticalAlign","_getStretchStopLabel","notation","iconClass","viewModel","_refreshActiveLayerInfos","render","_renderOnActiveLayerInfoChange","scheduleRender","aliasOf","overridable","flatten"],"mappings":"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","file":"static/js/100.0bd68798.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as a}from\"./commonProperties.js\";import{isExportDynamic as o}from\"./sublayerUtils.js\";const l={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let n=class extends(s(r)){constructor(e){super(e),this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>e.toExportImageJSON()));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&o(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(l[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=this.visibleSublayers.filter((e=>null!=e.definitionExpression));return e.length?JSON.stringify(e.reduce(((e,r)=>(e[r.id]=r.definitionExpression,e)),{})):null}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\"),this.commitProperty(\"timeExtent\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=r=>{const t=this.scale,i=0===t,a=0===r.minScale||t<=r.minScale,o=0===r.maxScale||t>=r.maxScale;r.visible&&(i||a&&o)&&(r.sublayers?r.sublayers.forEach(s):e.unshift(r))};r&&r.forEach(s);const t=this._get(\"visibleSublayers\");return!t||t.length!==e.length||t.some(((r,s)=>e[s]!==r))?e:t}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e([t({readOnly:!0})],n.prototype,\"dynamicLayers\",null),e([t({readOnly:!0})],n.prototype,\"hasDynamicLayers\",null),e([t()],n.prototype,\"layer\",null),e([t({readOnly:!0})],n.prototype,\"layers\",null),e([t({readOnly:!0})],n.prototype,\"layerDefs\",null),e([t({type:Number})],n.prototype,\"scale\",void 0),e([t(a)],n.prototype,\"timeExtent\",void 0),e([t({readOnly:!0})],n.prototype,\"version\",null),e([t({readOnly:!0})],n.prototype,\"visibleSublayers\",null),n=e([i(\"esri.layers.mixins.ExportImageParameters\")],n);export{n as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import{toHSV as t,toRGB as s}from\"../../core/colorUtils.js\";import\"../../core/has.js\";import r from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{isNone as a,isSome as l}from\"../../core/maybe.js\";import{eachAlways as n}from\"../../core/promiseUtils.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{getPatternUrlWithColor as c,defaultThematicColor as h}from\"./gfxUtils.js\";import{defaultPrimitive as u}from\"./IconSymbol3DLayerResource.js\";import{defaultPrimitive as p}from\"./ObjectSymbol3DLayerResource.js\";import{adjustColorComponentBrightness as m,getPathSymbolShapes as f,shapes as y,getTetrahedronShapes as d,getDiamondShapes as b,getCylinderShapes as v,getCubeShapes as g,getInvertedConeShapes as k,getConeShapes as w,getWaterSymbolShapes as x,getExtrudeSymbolShapes as M}from\"./previewUtils.js\";import{renderSymbol as L,tintImageWithColor as j}from\"./renderUtils.js\";import{resolveWebStyleSymbol as z}from\"./styleUtils.js\";import{isVolumetricSymbol as P,getIconHref as S}from\"./utils.js\";const U=22,D=120,O=80,I=40,R=20,E=o.getLogger(\"esri.symbols.support.previewSymbol3D\");function C(e){const t=e.outline,s=l(e.material)?e.material.color:null,r=l(s)?s.toHex():null;if(a(t))return\"fill\"===e.type&&\"#ffffff\"===r?{color:\"#bdc3c7\",width:.75}:null;const o=i(t.size)||0;return{color:\"rgba(\"+(l(t.color)?t.color.toRgba():\"255,255,255,1\")+\")\",width:Math.min(o,O)}}function Z(t,s){const r=s&&s.resource,o=r&&r.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(o&&\"object\"!==s.type)return Promise.resolve(S(t,s));const a=e(\"esri/images/Legend/legend3dsymboldefault.png\");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?z(t.styleOrigin,{portal:t.styleOrigin.portal},\"webRef\").catch((e=>e)).then((e=>{var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||a})):Promise.resolve(a)}function q(e,r=1){const o=e.a,a=t(e),l=a.h,n=a.s/r,i=100-(100-a.v)/r,{r:c,g:h,b:u}=s({h:l,s:n,v:i});return[c,h,u,o]}function A(e){return\"water\"===e.type?a(e.color)?null:e.color:a(e.material)||a(e.material.color)?null:e.material.color}function H(e,t=0){const s=A(e);if(!s){if(\"fill\"===e.type)return null;const s=h.r,r=m(s,t);return[r,r,r,100]}const r=s.toRgba();for(let o=0;o<3;o++)r[o]=m(r[o],t);return r}async function N(t,s){const r=t.style;if(\"none\"===r)return null;return{type:\"pattern\",x:0,y:0,src:await c(e(`esri/symbols/patterns/${r}.png`),s.toCss(!0)),width:5,height:5}}function T(e){return e.outline?C(e):{color:\"rgba(0, 0, 0, 1)\",width:1.5}}function $(e,t){const s=A(e);if(!s)return null;let r=\"rgba(\";return r+=m(s.r,t)+\",\",r+=m(s.g,t)+\",\",r+=m(s.b,t)+\",\",r+s.a+\");\"}function B(e,t){const s=$(e,t);if(!s)return{};return{color:s,width:Math.min(e.size?i(e.size):.75,O)}}function F(e,t,s){const r=.75*s;return{type:\"linear\",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function G(e){const t=e.depth,s=e.height,r=e.width;return r&&t&&s&&r===t&&r<s}function J(e,t,s){const r=[];if(!e)return r;switch(e.type){case\"icon\":{const s=0,o=0,a=t,l=t;switch(e.resource&&e.resource.primitive||u){case\"circle\":r.push({shape:{type:\"circle\",cx:0,cy:0,r:.5*t},fill:H(e,0),stroke:C(e)});break;case\"square\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,l]},{command:\"L\",values:[s,o]},{command:\"L\",values:[a,o]},{command:\"L\",values:[a,l]},{command:\"Z\",values:[]}]},fill:H(e,0),stroke:C(e)});break;case\"triangle\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,l]},{command:\"L\",values:[.5*a,o]},{command:\"L\",values:[a,l]},{command:\"Z\",values:[]}]},fill:H(e,0),stroke:C(e)});break;case\"cross\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[.5*a,o]},{command:\"L\",values:[.5*a,l]},{command:\"M\",values:[s,.5*l]},{command:\"L\",values:[a,.5*l]}]},stroke:T(e)});break;case\"x\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,o]},{command:\"L\",values:[a,l]},{command:\"M\",values:[a,o]},{command:\"L\",values:[s,l]}]},stroke:T(e)});break;case\"kite\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,.5*l]},{command:\"L\",values:[.5*a,o]},{command:\"L\",values:[a,.5*l]},{command:\"L\",values:[.5*a,l]},{command:\"Z\",values:[]}]},fill:H(e,0),stroke:C(e)})}break}case\"object\":switch(e.resource&&e.resource.primitive||p){case\"cone\":{const o=F(H(e,0),H(e,-.6),s?R:t),a=w(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o});break}case\"inverted-cone\":{const s=H(e,0),o=F(s,H(e,-.6),t),a=k(t);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:s});break}case\"cube\":{const o=g(t,s);r.push({shape:o[0],fill:H(e,0)}),r.push({shape:o[1],fill:H(e,-.3)}),r.push({shape:o[2],fill:H(e,-.5)});break}case\"cylinder\":{const o=F(H(e,0),H(e,-.6),s?R:t),a=v(t,s);r.push({shape:a[0],fill:o}),r.push({shape:a[1],fill:o}),r.push({shape:a[2],fill:H(e,0)});break}case\"diamond\":{const s=b(t);r.push({shape:s[0],fill:H(e,-.3)}),r.push({shape:s[1],fill:H(e,0)}),r.push({shape:s[2],fill:H(e,-.3)}),r.push({shape:s[3],fill:H(e,-.7)});break}case\"sphere\":{const s=F(H(e,0),H(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:\"circle\",cx:0,cy:0,r:.5*t},fill:s});break}case\"tetrahedron\":{const s=d(t);r.push({shape:s[0],fill:H(e,-.3)}),r.push({shape:s[1],fill:H(e,0)}),r.push({shape:s[2],fill:H(e,-.6)});break}}break}return r}function K(e){return\"icon\"===e.type?\"multiply\":\"tint\"}function Q(e,t){const s=t&&t.size?i(t.size):null,r=t&&t.maxSize?i(t.maxSize):null,o=t&&t.disableUpsampling,a=e.symbolLayers,l=[];let c=0,h=0;const u=a.getItemAt(a.length-1);let p;return u&&\"icon\"===u.type&&(p=u.size&&i(u.size)),a.forEach((a=>{if(\"icon\"!==a.type&&\"object\"!==a.type)return;const n=\"icon\"===a.type?a.size&&i(a.size):0,u=s||n?Math.ceil(Math.min(s||n,r||D)):U;if(a&&a.resource&&a.resource.href){const t=Z(e,a).then((function(e){const t=a.get(\"material.color\"),s=K(a);return j(e,u,t,s,o)})).then((function(e){const t=e.width,s=e.height;return c=Math.max(c,t),h=Math.max(h,s),[{shape:{type:\"image\",x:0,y:0,width:t,height:s,src:e.url},fill:null,stroke:null}]}));l.push(t)}else{var m;let e=u;\"icon\"===a.type&&p&&s&&(e=u*(n/p));const r=\"tall\"===(null==t?void 0:t.symbolConfig)||(null==t||null==(m=t.symbolConfig)?void 0:m.isTall)||\"object\"===a.type&&G(a);c=Math.max(c,r?R:e),h=Math.max(h,e),l.push(Promise.resolve(J(a,e,r)))}})),n(l).then((function(e){const s=[];return e.forEach((function(e){e.value?s.push(e.value):e.error&&E.warn(\"error while building swatchInfo!\",e.error)})),L(s,[c,h],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function V(e,t){const s=e.symbolLayers,r=[],o=P(e),a=t&&t.size?i(t.size):null,l=(t&&t.maxSize?i(t.maxSize):null)||O;let n,c=0,h=0;return s.forEach(((e,t)=>{if(!e)return;if(\"line\"!==e.type&&\"path\"!==e.type)return;const s=[];switch(e.type){case\"line\":{const r=B(e,0),o=r&&r.width||0;0===t&&(n=o);const i=Math.min(a||o,l),u=0===t?i:a?i*(o/n):i,p=u>I/2?2*u:I;h=Math.max(h,u),c=Math.max(c,p),r.width=u,s.push({shape:{type:\"path\",path:[{command:\"M\",values:[0,.5*h]},{command:\"L\",values:[c,.5*h]}]},stroke:r});break}case\"path\":{const t=Math.min(a||U,l),r=H(e,0),n=H(e,-.2),u=$(e,-.4),p=u?{color:u,width:1}:{};if(\"quad\"===e.profile){var o,i;const t=null!=(o=e.width)?o:e.size,a=null!=(i=e.height)?i:e.size,l=f(t&&a?t/a:1,0===a,0===t),c={...p,join:\"bevel\"};s.push({shape:l[0],fill:n,stroke:c}),s.push({shape:l[1],fill:n,stroke:c}),s.push({shape:l[2],fill:r,stroke:c})}else s.push({shape:y.pathSymbol3DLayer[0],fill:n,stroke:p}),s.push({shape:y.pathSymbol3DLayer[1],fill:r,stroke:p});h=Math.max(h,t),c=h}}r.push(s)})),Promise.resolve(L(r,[c,h],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}async function W(e,t){const s=\"mesh-3d\"===e.type,r=e.symbolLayers,o=t&&t.size?i(t.size):null,a=t&&t.maxSize?i(t.maxSize):null,n=o||U,c=[];let h=0,u=0,p=!1;for(let i=0;i<r.length;i++){const e=r.getItemAt(i),t=[];if(s&&\"fill\"!==e.type)continue;const o=y.fill[0];switch(e.type){case\"fill\":{const r=C(e),i=Math.min(n,a||D);h=Math.max(h,i),u=Math.max(u,i),p=!0;let c=H(e,0);const m=\"pattern\"in e&&e.pattern,f=A(e);!s&&l(m)&&\"style\"===m.type&&\"solid\"!==m.style&&f&&(c=await N(m,f)),t.push({shape:o,fill:c,stroke:r});break}case\"line\":{const s={stroke:B(e,0),shape:o};h=Math.max(h,U),u=Math.max(u,U),t.push(s);break}case\"extrude\":{const s={join:\"round\",...B(e,-.4)},r=H(e,0),o=H(e,-.2),l=Math.min(n,a||D),i=M(l);s.width=1,t.push({shape:i[0],fill:o,stroke:s}),t.push({shape:i[1],fill:o,stroke:s}),t.push({shape:i[2],fill:r,stroke:s});const c=U,p=.7*U+.5*l;h=Math.max(h,c),u=Math.max(u,p);break}case\"water\":{const s=A(e),r=q(s),o=q(s,2),l=q(s,3),i=x();p=!0,t.push({shape:i[0],fill:r}),t.push({shape:i[1],fill:o}),t.push({shape:i[2],fill:l});const c=Math.min(n,a||D);h=Math.max(h,c),u=Math.max(u,c);break}}c.push(t)}return Promise.resolve(L(c,[h,u],{node:t&&t.node,scale:p,opacity:t&&t.opacity}))}function X(e,t){if(0===e.symbolLayers.length)return Promise.reject(new r(\"symbolPreview: renderPreviewHTML3D\",\"No symbolLayers in the symbol.\"));let s=null;switch(e.type){case\"point-3d\":s=Q(e,t);break;case\"line-3d\":s=V(e,t);break;case\"polygon-3d\":case\"mesh-3d\":s=W(e,t)}return s||Promise.reject(new r(\"symbolPreview: swatchInfo3D\",\"symbol not supported.\"))}export{N as getPatternDescriptor,H as getSymbolLayerFill,X as previewSymbol3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import r from\"../../core/Error.js\";import{isNone as e}from\"../../core/maybe.js\";import{to3D as n}from\"../../symbols/support/symbolConversion.js\";function o(r){return e(r)||\"simple\"===r.type||\"unique-value\"===r.type||\"class-breaks\"===r.type||\"dictionary\"===r.type}function s(n){if(e(n))return null;if(!o(n))return new r(\"renderer-conversion-3d:unsupported-renderer\",`Unsupported renderer of type '${n.type||n.declaredClass}'`,{renderer:n});switch(n.type){case\"simple\":return u(n);case\"unique-value\":return l(n);case\"class-breaks\":return i(n);case\"dictionary\":return null}return null}function t(e,n){if(!n)return null;let o;if(o=Array.isArray(n)?n:[n],o.length>0){const n=o.map((r=>r.details.symbol.type||r.details.symbol.declaredClass)).filter((r=>!!r));n.sort();const s=[];return n.forEach(((r,e)=>{0!==e&&r===n[e-1]||s.push(r)})),new r(\"renderer-conversion-3d:unsupported-symbols\",`Renderer contains symbols (${s.join(\", \")}) which are not supported in 3D`,{renderer:e,symbolErrors:o})}return null}function u(r){return t(r,n(r.symbol).error)}function l(r){const e=r.uniqueValueInfos.map((r=>n(r.symbol).error)).filter((r=>!!r)),o=n(r.defaultSymbol);return o.error&&e.unshift(o.error),t(r,e)}function i(r){const e=r.classBreakInfos.map((r=>n(r.symbol).error)).filter((r=>!!r)),o=n(r.defaultSymbol);return o.error&&e.unshift(o.error),t(r,e)}export{o as isSupportedRenderer3D,s as validateTo3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";const l=(e,l)=>{const a=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=l&&l.levels?l.levels[a]:null};function a(a,i){if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const s=a.visualVariables.find((e=>\"size\"===e.type)),n=l(i,s);return n?new e({field:s.field,minSize:n[2].size,minDataValue:n[2].value,maxSize:n[3].size,maxDataValue:n[3].value}):null}export{a as getClusterSizeVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../intl.js\";import{formatNumber as t}from\"../../intl/number.js\";const n=/^-?(\\d+)(\\.(\\d+))?$/i;function e(t,n){return t-n}function r(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/10**n:(r=e,e-=1/10**n),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function o(t,n,e,r,o){const i=l(t,n,e,r),u=null==i.previous||i.previous<=o,s=null==i.next||i.next<=o;return u&&s||i.previous+i.next<=2*o}function i(t){const e=String(t),r=e.match(n);if(r&&r[1])return{integer:r[1].split(\"\").length,fractional:r[3]?r[3].split(\"\").length:0};if(e.toLowerCase().indexOf(\"e\")>-1){const t=e.split(\"e\"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const o=e>0;o||(e=Math.abs(e));const l=i(t);return o?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return{integer:0,fractional:0}}function l(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r))}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e))}return o}function u(t,n={}){const l=t.slice(0),{tolerance:u=2,strictBounds:s=!1,indexes:c=l.map(((t,n)=>n))}=n;c.sort(e);for(let e=0;e<c.length;e++){const t=c[e],n=l[t],a=0===t?null:l[t-1],f=t===l.length-1?null:l[t+1],m=i(n).fractional;if(m){let i,c=0,g=!1;for(;c<=m&&!g;){const t=r(n,c);i=s&&0===e?t[1]:t[0],g=o(n,i,a,f,u),c++}g&&(l[t]=i)}}return l}const s={maximumFractionDigits:20};function c(n){return t(n,s)}export{c as format,i as numDigits,l as percentChange,u as round};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{formatDate as A,convertDateFormatToIntlOptions as a}from\"../../../intl/date.js\";import{format as t}from\"../../../renderers/support/numberUtils.js\";const g=\"<\",w=\">\",I=a(\"short-date\");function U(a,U,e,i){let o=\"\";0===U?o=`${g} `:U===e&&(o=`${w} `);let r=null;return r=i?A(a,I):t(a),o+r}const e=[\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=\",\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=\",\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII=\"];export{e as RGB_IMG_SOURCE,U as createStopLabel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport l from\"../../../Color.js\";import{createStopLabel as e}from\"./utils.js\";const o=new l([64,64,64]);function n(l,o){const n=[],r=l.length-1;return 5===l.length?n.push(0,2,4):n.push(0,r),l.map(((l,t)=>n.indexOf(t)>-1?e(l,t,r,o):null))}async function r(l,e,o){let r=!1,a=[],u=[];if(l.stops){const e=l.stops;a=e.map((l=>l.value)),r=e.some((l=>!!l.label)),r&&(u=e.map((l=>l.label)))}const s=a[0],i=a[a.length-1];if(null==s&&null==i)return null;const c=r?null:n(a,o);return(await Promise.all(a.map((async(o,n)=>({value:o,color:\"opacity\"===l.type?await t(o,l,e):(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getColor(l,o),label:r?u[n]:c[n]}))))).reverse()}async function t(e,n,r=o){const t=new l(r),a=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getOpacity(n,e);return null!=a&&(t.a=a),t}function a(l){let e=!1,o=[],r=[];o=l.map((l=>l.value)),e=l.some((l=>!!l.label)),e&&(r=l.map((l=>l.label)));const t=o[0],a=o[o.length-1];if(null==t&&null==a)return null;const s=e?null:n(o,!1);return o.map(((o,n)=>({value:o,color:u(o,l),label:e?r[n]:s[n]}))).reverse()}function u(e,o){const{startIndex:n,endIndex:r,weight:t}=s(e,o);if(n===r)return o[n].color;const a=l.blendColors(o[n].color,o[r].color,t);return new l(a)}function s(l,e){let o=0,n=e.length-1;return e.some(((e,r)=>l<e.value?(n=r,!0):(o=r,!1))),{startIndex:o,endIndex:n,weight:(l-e[o].value)/(e[n].value-e[o].value)}}function i(e,o){let n=[];if(e&&\"multipart\"===e.type)e.colorRamps.reverse().forEach((function(r,t){0===t?n.push({value:o.max,color:new l(r.toColor),label:\"high\"}):n.push({value:null,color:new l(r.toColor),label:\"\"}),t===e.colorRamps.length-1?n.push({value:o.min,color:new l(r.fromColor),label:\"low\"}):n.push({value:null,color:new l(r.fromColor),label:\"\"})}));else{let r,t;e&&\"algorithmic\"===e.type?(r=e.fromColor,t=e.toColor):(r=[0,0,0,1],t=[255,255,255,1]),n=[{value:o.max,color:new l(t),label:\"high\"},{value:o.min,color:new l(r),label:\"low\"}]}return n}export{u as getColorFromPointCloudStops,r as getRampStops,a as getRampStopsForPointCloud,i as getStrectchRampStops};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport o from\"../../../renderers/support/HeatmapColorStop.js\";function r(r){let t=r.colorStops,e=t.length-1;if(t&&t[0]){const r=t[e];r&&1!==r.ratio&&(t=t.slice(0),t.push(new o({ratio:1,color:r.color})),e++)}return t.map(((o,r)=>{let t=\"\";return 0===r?t=\"low\":r===e&&(t=\"high\"),{color:o.color,label:t,ratio:o.ratio}})).reverse()}export{r as getHeatmapRampStops};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../core/lang.js\";import{getStroke as o,getFill as e}from\"../../../symbols/support/gfxUtils.js\";import{getSymbolLayerFill as r}from\"../../../symbols/support/previewSymbol3D.js\";const s={HH:315,HL:45,LL:135,LH:225},l={2:[[\"HL\",\"HH\"],[\"LL\",\"LH\"]],3:[[\"HL\",\"HM\",\"HH\"],[\"ML\",\"MM\",\"MH\"],[\"LL\",\"LM\",\"LH\"]],4:[[\"HL\",\"HM1\",\"HM2\",\"HH\"],[\"M2L\",\"M2M1\",\"M2M2\",\"M2H\"],[\"M1L\",\"M1M1\",\"M1M2\",\"M1H\"],[\"LL\",\"LM1\",\"LM2\",\"LH\"]]};function n(t){if(!t)return;const{type:s}=t;if(s.indexOf(\"3d\")>-1)return r(t.symbolLayers.getItemAt(0));if(\"simple-line\"===s){const e=o(t);return e&&e.color}if(\"simple-marker\"===t.type&&(\"x\"===t.style||\"cross\"===t.style)){const e=o(t);return e&&e.color}return e(t)}function H(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){case\"HH\":return{top:e,bottom:r,left:s,right:l};case\"HL\":return{top:s,bottom:l,left:r,right:e};case\"LL\":return{top:r,bottom:e,left:l,right:s};case\"LH\":return{top:l,bottom:s,left:e,right:r};default:return{top:e,bottom:r,left:s,right:l}}}function i(o,e){const r=[],s=o.length**.5,l=t(o),n=(e||\"HH\").split(\"\"),H=n[0],i=\"H\"===n[1];for(;l.length;){const t=[];for(;t.length<s;)t.push(l.shift());i&&t.reverse(),r.push(t)}return\"L\"===H&&r.reverse(),r}function L(t){const{focus:o,infos:e,numClasses:r}=t,s=l[r],i={};e.forEach((t=>{i[t.value]={label:t.label,fill:n(t.symbol)}}));const L=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=i[s[l][o]];t.push(e.fill)}L.push(t)}return{type:\"relationship-ramp\",numClasses:r,focus:o,colors:L,labels:H(o,i),rotation:f(o)}}function f(t){let o=s[t];return t&&null==o&&(o=s.HH),o||0}export{i as getRelationshipRampColors2D,L as getRelationshipRampElement,f as getRotationAngleForFocus};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{isSymbol3D as l}from\"../../../symbols.js\";import{round as t,numDigits as n,percentChange as i}from\"../../../renderers/support/numberUtils.js\";import{applyCIMSymbolColor as o}from\"../../../symbols/support/cimSymbolUtils.js\";import{isVolumetricSymbol as s,getSymbolOutlineSize as r}from\"../../../symbols/support/utils.js\";import{createStopLabel as a}from\"./utils.js\";const u=30,c=12,m=[255,255,255],f=[200,200,200],p=[128,128,128],y=20,b=5;function d(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function h(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function v(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function g(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function w(e,l){const t=e.length-1;return e.map(((e,n)=>a(e,n,t,l)))}async function S(e,l,n,i,o,a){var u,c;const m=l.legendOptions,f=m&&m.customValues,p=V(e,n),y=!!p,b=!!f,d=null!=l.minSize&&null!=l.maxSize,h=l.stops&&l.stops.length>1,v=!!l.target;if(!y||!b&&!(d||h&&!v))return;const g=s(p);let S=null,k=null,j=null;k=g&&!h?t([l.minDataValue,l.maxDataValue]):f||await C(l,p,i,o);const L=null==e?void 0:e.authoringInfo,O=\"univariate-color-size\"===(null==L?void 0:L.type),D=O&&\"above-and-below\"===(null==L?void 0:L.univariateTheme);if(!k&&h&&(k=l.stops.map((e=>e.value)),S=l.stops.some((e=>!!e.label)),S&&(j=l.stops.map((e=>e.label)))),g&&(null==(u=k)?void 0:u.length)>2&&!D&&(k=[k[0],k[k.length-1]]),!k)return null;O&&5!==(null==(c=k)?void 0:c.length)&&(k=I({minSize:k[0],maxSize:k[k.length-1]}));const E=g?z(e,k):null,T=r(p),q=S?null:w(k,a);return(await Promise.all(k.map((async(t,n)=>{const s=g?E[n]:await M(l,p,t,i,o);return{value:t,symbol:U(D&&\"class-breaks\"===e.type?x(e,n):p,s),label:S?j[n]:q[n],size:s,outlineSize:T}})))).reverse()}function z(e,l){const t=null==e?void 0:e.authoringInfo,n=\"univariate-color-size\"===(null==t?void 0:t.type);let i=[c,u];if(n){const e=l[0],t=l[l.length-1],n=c,o=u;i=l.map((l=>n+(l-e)/(t-e)*(o-n)))}return n&&\"below\"===(null==t?void 0:t.univariateTheme)&&i.reverse(),i}function x(e,l){const t=e.classBreakInfos,n=t.length,i=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone();return e.visualVariables.some((e=>\"color\"===e.type))&&(i.type.indexOf(\"3d\")>-1?j(i):L(i)),i}function V(e,l){let t=null,n=null;if(\"simple\"===e.type)t=e.symbol;else if(\"class-breaks\"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if(\"unique-value\"===e.type){const l=e.uniqueValueInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}return!t||k(t)?null:(t=t.clone(),(l||n)&&(t.type.indexOf(\"3d\")>-1?j(t):L(t)),t)}function k(e){if(e){if(l(e)){return!!e.symbolLayers&&e.symbolLayers.some((e=>e&&\"fill\"===e.type))}return-1!==e.type.indexOf(\"fill\")}return!1}function j(e){\"line-3d\"===e.type?e.symbolLayers.forEach((e=>{e.material={color:p}})):e.symbolLayers.forEach((e=>{\"icon\"!==e.type||e.resource&&e.resource.href?e.material={color:f}:(e.material={color:m},e.outline={color:p,size:1.5})}))}function L(l){\"cim\"===l.type?o(l,new e(f)):-1!==l.type.indexOf(\"line\")?l.color=p:(l.color=m,\"simple-marker\"===l.type&&(l.outline={color:p,width:1.5}))}async function C(e,l,n,i){const o=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,n,i),s=o&&I(o);if(!o&&!s)return;let r=s.map((l=>O(l,e,o)));r=t(r);for(let t=1;t<r.length-1;t++){const o=await D(e,l,r[t],r[t-1],n,i);o&&(r[t]=o[0],s[t]=o[1])}return r}function I(e){const l=e.minSize,t=e.maxSize,n=b,i=(t-l)/(n-1),o=[];for(let s=0;s<n;s++)o.push(l+i*s);return o}function O(e,l,t){const n=t.minSize,i=t.maxSize,o=l.minDataValue,s=l.maxDataValue;let r=null;if(e<=n)r=o;else if(e>=i)r=s;else{r=(e-n)/(i-n)*(s-o)+o}return r}async function D(e,l,o,s,r,a){const u=await M(e,l,o,r,a),c=await M(e,l,s,r,a),m=n(o),f=m.fractional,p=y;let b=m.integer,d=null,h=null;o>0&&o<1&&(d=10**f,b=n(o*=d).integer);for(let n=b-1;n>=0;n--){const s=10**n;let m=Math.floor(o/s)*s,f=Math.ceil(o/s)*s;null!=d&&(m/=d,f/=d);let y=(m+f)/2;[,y]=t([m,y,f],{indexes:[1]});const b=await M(e,l,m,r,a),v=await M(e,l,f,r,a),g=await M(e,l,y,r,a),w=i(u,b,c,null),S=i(u,v,c,null),z=i(u,g,c,null);let x=w.previous<=p,V=S.previous<=p;if(x&&V&&(w.previous<=S.previous?(x=!0,V=!1):(V=!0,x=!1)),x?h=[m,b]:V?h=[f,v]:z.previous<=p&&(h=[y,g]),h)break}return h}async function M(e,l,t,n,i){const{getSize:o}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return o(e,t,{scale:n,view:i,shape:\"simple-marker\"===l.type?l.style:null})}function U(e,t){const n=e.clone();if(l(n))s(n)||n.symbolLayers.forEach((e=>{\"fill\"!==e.type&&(e.size=t)}));else if(d(n))n.size=t;else if(h(n)){const e=n.width,l=n.height;n.height=t,n.width=t*(e/l)}else v(n)?n.width=t:g(n)&&n.font&&(n.font.size=t);return n}export{u as REAL_WORLD_MAX_SIZE,c as REAL_WORLD_MIN_SIZE,S as getRampStops};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import{addTokenParameter as l}from\"../../../kernel.js\";import s from\"../../../request.js\";import\"../../../symbols.js\";import n from\"../../../core/Accessor.js\";import i from\"../../../core/Collection.js\";import r from\"../../../core/Handles.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{unwrap as u,isSome as d}from\"../../../core/maybe.js\";import{eachAlways as c,debounce as y}from\"../../../core/promiseUtils.js\";import{px2pt as h}from\"../../../core/screenUtils.js\";import{objectToQuery as m}from\"../../../core/urlUtils.js\";import{on as p,init as f,watch as g}from\"../../../core/watchUtils.js\";import{property as b}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as S}from\"../../../core/accessorSupport/decorators/subclass.js\";import{ExportImageParameters as _}from\"../../../layers/support/ExportImageParameters.js\";import{isDateField as v}from\"../../../layers/support/fieldUtils.js\";import{fromJSON as L}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as w}from\"../../../renderers/support/rendererConversion.js\";import E from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{applyCIMSymbolColor as I}from\"../../../symbols/support/cimSymbolUtils.js\";import{renderColorRampPreviewHTML as C,renderDotDensityPreviewHTML as R,renderPreviewHTML as F}from\"../../../symbols/support/symbolUtils.js\";import{isVolumetricSymbol as T}from\"../../../symbols/support/utils.js\";import{getClusterSizeVariable as V}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as z,getRampStopsForPointCloud as x,getStrectchRampStops as M,getRampStops as j}from\"./colorRampUtils.js\";import{getHeatmapRampStops as D}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as O,getRelationshipRampElement as P}from\"./relationshipRampUtils.js\";import{getRampStops as B,REAL_WORLD_MAX_SIZE as U,REAL_WORLD_MIN_SIZE as k}from\"./sizeRampUtils.js\";import{RGB_IMG_SOURCE as A}from\"./utils.js\";import N from\"../../../symbols/SimpleMarkerSymbol.js\";import W from\"../../../symbols/SimpleFillSymbol.js\";const q=o.getLogger(\"esri.widgets.Legend.support.ActiveLayerInfo\"),$=\"https://utility.arcgis.com/sharing/tools/legend\",G=\"esri.layers.ImageryLayer\",J=\"esri.layers.ImageryTileLayer\",H=\"esri.layers.WCSLayer\",X=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,K=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),Q={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Y=new N({size:6,outline:{color:[128,128,128,.5],width:.5}}),Z=new W({style:\"solid\"});function ee(e){return\"vector-field\"===e.type}function te(e){return\"raster-colormap\"===e.type}function le(e){return\"raster-stretch\"===e.type}function se(e){return\"raster-shaded-relief\"===e.type}function ne(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function ie(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function re(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function ae(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function oe(e){return de(e)||ce(e)||ye(e)||ue(e)}function ue(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function de(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function ce(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function ye(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function he(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function me(e,t){return ne(e)||ie(e)||re(e)||ae(e)||he(e)?\"2d\"===t.type||w(e):le(e)||te(e)||se(e)||de(e)||ce(e)||ye(e)||ee(e)}function pe(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function fe(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function ge(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function be(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function Se(e){return\"esri.layers.TileLayer\"===e.declaredClass}function _e(e){return\"esri.layers.FeatureLayer\"===e.declaredClass}function ve(e){return e.declaredClass===G}function Le(e){return e.declaredClass===J}function we(e){return e.declaredClass===H}function Ee(e){return\"stretch-ramp\"===e.type}function Ie(e){const t=\"authoringInfo\"in e&&(null==e?void 0:e.authoringInfo);return\"univariate-color-size\"===(null==t?void 0:t.type)}function Ce(e){const t=\"authoringInfo\"in e&&(null==e?void 0:e.authoringInfo);return\"univariate-color-size\"===(null==t?void 0:t.type)&&\"above-and-below\"===(null==t?void 0:t.univariateTheme)}const Re=new N({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let Fe={},Te=class extends n{constructor(e){super(e),this._handles=new r,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new i,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this._handles.add([p(this,\"children\",\"change\",(t=>{const{added:l,removed:s}=t,n=this._handles;l.map((t=>{const l=`activeLayerInfo-ready-watcher-${t.layer.uid}`;n.add(f(t,\"ready\",e),l)})),s.forEach((e=>n.remove(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(Fe={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Fe=null)}get opacity(){var e;const t=this.layer.opacity,l=null==(e=this.parent)?void 0:e.opacity,s=this.layer.parent,n=s&&\"uid\"in s?this._getParentLayerOpacity(s):null;return null!=l?l*t:null!=n?n*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"featureReduction\"in e&&e.featureReduction&&\"cluster\"===e.featureReduction.type)return!0;if(\"renderer\"in e&&e.renderer){if(\"dot-density\"===e.renderer.type)return!0;const t=e.get(\"renderer.valueExpression\");if(X.test(t))return!0;const l=e.get(\"renderer.visualVariables\");if(l)return l.some((e=>this._isScaleDrivenSizeVariable(e)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){const t=e.map((e=>{if(_e(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){const t=e.layerDefinition,l=t&&t.drawingInfo,s=l&&L(l.renderer),n=K.read(t.geometryType);return s?this._getRendererLegendElements(s,{title:e.name,geometryType:n}):(q.warn(\"drawingInfo not available!\"),null)}return null}));try{const e=[];await c(t).then((t=>{t.forEach((({value:t})=>t&&e.push(...t)))})),this.legendElements=e,this.notifyChange(\"ready\")}catch(l){q.warn(\"error while building legend for layer!\",l)}}async buildLegendElementsForRenderer(e){try{const t=await this._getRendererLegendElements(e);this.legendElements=t,this.notifyChange(\"ready\")}catch(t){q.warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForTools(){const e=this.layer;if(ge(e))this._constructLegendElementsForWMTSlayer();else if(fe(e))await this._constructLegendElementsForWMSSublayers();else if(pe(e))await this._constructLegendElementsForBuildingSceneLayer();else if(be(e)||Se(e)||pe(e))await this._constructLegendElementsForSublayers();else{this._handles.remove(\"imageryLayers-watcher\");let s=\"default\";if(ve(e)){var t,l;const n=e;s=((null==n||null==(t=n.renderingRule)?void 0:t.functionName)||\"default\")+\"_\"+(null!=(l=e.bandIds)&&l.length?e.bandIds.join(\"\"):\"###\")}await this._getLegendLayers(`${e.uid}-${s}`).then((async t=>{this.legendElements=[],this.notifyChange(\"ready\");const l=t.map((async t=>{if(ve(e)||Le(e)){const t=e.watch([\"renderingRule\",\"bandIds\"],(()=>y((async()=>{Fe.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this._handles.add(t,\"imageryLayers-watcher\")}const l=this._generateSymbolTableElementForLegendLayer(t);l&&l.infos.length&&(ve(e)&&(l.title=e.title),this.legendElements.push(l)),this.notifyChange(\"ready\")}));await c(l)})).catch((e=>{q.warn(\"Request to server for legend has failed!\",e)}))}}_getParentLayerOpacity(e){let t=1;const l=e.parent;return l&&\"uid\"in l&&(t=this._getParentLayerOpacity(l)),e.opacity*t}_isGroupActive(){const e=this.children;return!!e.length&&e.some((e=>e.ready))}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,l=t.minSize,s=t.maxSize;return\"object\"==typeof l&&l?this._isScaleDrivenSizeVariable(l):\"object\"==typeof s&&s?this._isScaleDrivenSizeVariable(s):!!t.expression||X.test(t.valueExpression)}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&be(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const l of t.sourceJSON.layers)if(l.id===e.source.mapLayerId&&(l.minScale>0||l.maxScale>0))return!0;return!1}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;if(this._handles.add(g(this.layer,\"activeLayer\",(()=>this._constructLegendElementsForWMTSlayer())),\"wmts-activeLayer-watcher\"),e.styleId&&e.styles){let t=null;e.styles.some((l=>e.styleId===l.id&&(t=l.legendUrl,!0))),t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(g(this.layer,\"sublayers\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const l=[];this._handles.add(e.on(\"change\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\");const s=e.toArray();for(const n of s){const e=n.watch([\"title\",\"visible\",\"legendEnabled\"],(()=>this._constructLegendElementsForWMSSublayers()));if(this._handles.add(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||n.visible&&n.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(n,t);e&&e.infos.length&&l.unshift(e)}}return l}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const l=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:\"symbol-table\",title:e.title,infos:l}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var l;let n=e.legendUrl;if(!n)return;const i={type:\"symbol-table\",title:e.title||e.name||e.id&&e.id+\"\",infos:[]};t&&(n+=\"?\"+m(t));let r=null;const a=null==(l=e.layer)?void 0:l.opacity;try{r=(await s(n,{responseType:\"image\"})).data,r&&(r.style.opacity=a)}catch{}return i.infos.push({src:n,preview:r,opacity:a}),i}_getLegendLayers(e,t){const l=Fe&&Fe[e];return l?Promise.resolve(l):this._legendRequest(t).then((t=>{const l=t.layers;return Fe[e]=l,l}))}_legendRequest(e){const t=this.layer;let l={f:\"json\",dynamicLayers:e};if(ve(t)){const e=t.exportImageServiceParameters.renderingRule;if(e&&(l.renderingRule=JSON.stringify(e.toJSON())),t.bandIds&&(l.bandIds=t.bandIds.join()),t.raster||t.viewId){const{raster:e,viewId:s}=t;l={raster:e,viewId:s,...l}}}let n=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&t.version>=10.01){const e=n.indexOf(\"?\");e>-1?n=n.substring(0,e)+\"/legend\"+n.substring(e):n+=\"/legend\"}else{const e=n.toLowerCase().indexOf(\"/rest/\"),t=n.substring(0,e)+n.substring(e+5,n.length);n=$+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return s(n,{query:l}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove(\"sublayers-watcher\");const e=this.layer;this._handles.add(g(e,\"sublayers\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){q.warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let l=[];this._handles.add(e.on(\"change\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");const s=e.toArray();for(const n of s){const e=n.watch([\"renderer\",\"opacity\",\"title\",\"visible\"],(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this._handles.add(e,\"sublayers-watcher\"),!this.respectLayerVisibility||n.visible){const e=n&&null!=n.opacity?n.opacity:null,s=null!=e?e*t:t;if(\"building-group\"===n.type){const e={type:\"symbol-table\",title:n.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(n.sublayers,s);e.infos.push(...t),l=[e,...l]}else if(n.renderer){l=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:s,sublayer:n}),...l]}}}return l.filter((e=>!!e&&(!(\"infos\"in e)||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove(\"sublayers-watcher\");const e=this.layer;this._handles.add(g(e,\"sublayers\",(()=>this._constructLegendElementsForSublayers)),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){q.warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForSublayers(e,t,l){const s=this.layer;let n=[];this._handles.add(e.on(\"change\",(()=>this._constructLegendElementsForSublayers())),\"sublayers-watcher\");let i=e.toArray();!l&&this.sublayerIds&&this.sublayerIds.length&&(i=this.sublayerIds.map((e=>s.findSublayerById(e))).filter(Boolean));for(const r of i){const e=r.watch(\"renderer, opacity, title, visible, legendEnabled\",(()=>this._constructLegendElementsForSublayers()));if(this._handles.add(e,\"sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const e=r&&null!=r.opacity?r.opacity:null,s=null!=e?e*t:t;if(r.renderer&&!r.sublayers&&r.originIdOf(\"renderer\")>2){await r.load();n=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:s,sublayer:r}),...n]}else{const e=await this._generateSymbolTableElementForSublayer(r,s,l);e&&n.unshift(e)}}}return n.filter((e=>!!e&&(!(\"infos\"in e)||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,l){if(!l){l=new Map;const t=new _({layer:this.layer}),s=t.hasDynamicLayers?t.dynamicLayers:null;t.destroy();const n=s||`${this.layer.uid}-${e.id}-default`;(await this._getLegendLayers(n,s)).forEach((e=>l.set(e.layerId,e)))}const s=l.get(e.id);if(!s&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,l);return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(s,e,t)}_generateSymbolTableElementForLegendLayer(e,t,l){var s;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const n=null==t?void 0:t.renderer;let i=(null==t?void 0:t.title)||e.layerName;if(n&&(!t||(null==t?void 0:t.originIdOf(\"renderer\"))>2)){const e=(null==t?void 0:t.title)||this._getRendererTitle(n,t);e&&(i&&\"string\"!=typeof e&&\"title\"in e&&(e.title=i),i=e)}const r={type:\"symbol-table\",title:i,legendType:e.legendType?e.legendType:null,infos:[]},a=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return(null==(s=e.legendGroups)?void 0:s.length)>0?e.legendGroups.forEach((t=>{var s;const n={type:\"symbol-table\",title:t.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter((e=>e.groupId===t.id)),e.layerId,l)};(null==(s=n.infos)?void 0:s.length)>0&&r.infos.push(n)})):r.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,l),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,s){return e.map((e=>{let n=e.url;if(e.imageData&&e.imageData.length>0)n=`data:image/png;base64,${e.imageData}`;else{if(0===n.indexOf(\"http\"))return null;n=l(`${this.layer.url}/${t}/images/${n}`)}return{label:e.label,src:n,opacity:null==s?this.opacity:s,width:e.width,height:e.height}})).filter((e=>!!e))}_isSublayerInScale(e){const t=e.minScale||0,l=e.maxScale||0;return!(t>0&&t<this.scale||l>this.scale)}_isLegendLayerInScale(e,t){const l=t||this.layer;let s=null,n=null,i=!0;return!l.minScale&&0!==l.minScale||!l.maxScale&&0!==l.maxScale?(0===e.minScale&&l.tileInfo&&(s=l.tileInfo.lods[0].scale),0===e.maxScale&&l.tileInfo&&(n=l.tileInfo.lods[l.tileInfo.lods.length-1].scale)):(s=Math.min(l.minScale,e.minScale)||l.minScale||e.minScale,n=Math.max(l.maxScale,e.maxScale)),(s>0&&s<this.scale||n>this.scale)&&(i=!1),i}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&this.layer.version<10.1||0===e.length)return e;const l=t.renderer,s=e.some((e=>e.values));let n=null,i=null;return s&&e.some(((e,t)=>(e.values||(n=t,i=e,i.label||(i.label=\"others\")),null!=i))),l?\"unique-value\"===l.type?i&&(e.splice(n,1),e.push(i)):\"class-breaks\"===l.type&&(i&&e.splice(n,1),e.reverse(),i&&e.push(i)):i&&(e.splice(n,1),e.push(i)),e}async _getRendererLegendElements(e,t={}){return me(e,this.view)?oe(e)?this._constructPointCloudRendererLegendElements(e,t):he(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(q.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const l=t.title,s=[];let n=null,i=null;if(de(e))n={type:\"symbol-table\",title:l||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{n.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(Y,e.color)})}));else if(ce(e)){const t=e.stops;let s=null;if(t.length&&(1===t.length&&(s=t[0].color),!s)){const e=t[0].value,l=t[t.length-1].value;if(null!=e&&null!=l){s=z(e+(l-e)/2,t)}}n={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Y,s||Y.color)}]};const r=x(e.stops);i={type:\"color-ramp\",title:l||this._getPointCloudRendererTitle(e),infos:r,preview:C(r.map((e=>e.color)))}}else ye(e)&&(n={type:\"symbol-table\",title:l||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((e=>{n.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(Y,e.color)})})));n&&n.infos.length&&s.push(n),i&&i.infos.length&&s.push(i);const r=s.reduce(((e,t)=>e.concat(t.infos)),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return c(r).then((()=>s))}_getElementInfoForDotDensity(e,t){const{backgroundColor:l,outline:s,dotSize:n}=e,i=n+\"-\"+t+\"-\"+l+\"-\"+(s&&JSON.stringify(s.toJSON())),r=this._dotDensityUrlCache,a=r.has(i)?r.get(i):R(e,t);return r.set(i,a),{opacity:1,src:a.src,preview:a,width:a.width,height:a.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),l=e.legendOptions&&e.legendOptions.unit,s={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:l||\"\"},infos:[]};return e.attributes.forEach((t=>{const l=this._getElementInfoForDotDensity(e,t.color);l.label=t.label||t.valueExpressionTitle||t.field,s.infos.push(l)})),Promise.resolve([s])}async _constructRendererLegendElements(e,t={}){const{title:l,sublayer:s}=t,n=s||this.layer;let i=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const r=await this._getVisualVariableLegendElements(i,n)||[],a={type:\"symbol-table\",title:l||this._getRendererTitle(i,n),infos:[]};let o=null,d=!1;const y=new Set;if(Ie(i)){let e=l;const t=Ce(i)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",s=r.findIndex((e=>\"color-ramp\"===e.type)),n=r.splice(s,1)[0],a=r.findIndex((e=>\"size-ramp\"===e.type)),o=r.splice(a,1)[0],u=[];n&&(e=n.title,u.push(n)),o&&(e=o.title,u.push(o)),u.length>0&&r.push({type:t,title:e,infos:u})}else if(ae(i)){const e=D(i);r.push({type:\"heatmap-ramp\",title:l,infos:e,preview:C(e.map((e=>e.color)))})}else if(re(i)){const e=i&&i.authoringInfo;if(e&&\"relationship\"===e.type){const{focus:t,numClasses:l,field1:s,field2:o}=e;if(l&&s&&o){const e=[s,o];let u=O(t)||0;for(const t of e){const{field:e,normalizationField:l,label:s}=t,i=s||{field:this._getFieldAlias(e,n),normField:l&&this._getFieldAlias(l,n)},r=Re.clone();r.angle=u,a.infos.push({label:i,symbol:r}),y.add(r),u+=90}const d=P({focus:t,numClasses:l,infos:i.uniqueValueInfos});r.unshift(d)}}else{const e=i.field;i.uniqueValueInfos.forEach((t=>{t.symbol&&a.infos.push({label:t.label||this._getDomainName(e,t.value,n)||t.value,value:t.value,symbol:t.symbol})}))}i.defaultSymbol&&(a.infos.push({label:i.defaultLabel||\"others\",symbol:i.defaultSymbol}),d=!0)}else if(ie(i)){o=this._isUnclassedRenderer(i);(!o||!this._hasSizeRamp)&&(i.classBreakInfos.forEach((e=>{e.symbol&&a.infos.unshift({label:e.label||(o?null:e.minValue+\" - \"+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol})})),o&&(a.title=null),this._updateInfosforClassedSizeRenderer(i,a.infos)),i.defaultSymbol&&!o&&(a.infos.push({label:i.defaultLabel||\"others\",symbol:i.defaultSymbol}),d=!0)}else if(le(i)){var h,m;if(Le(this.layer)&&\"Map\"===(null==(h=this.layer)||null==(m=h.raster)?void 0:m.tileType))this._getServerSideLegend();else if(Le(this.layer)||we(this.layer)){const e=this._constructTileImageryStretchRendererElements(i);Ee(e)?r.push(e):a.infos=e}else{const e=this.layer;let t,l;var p,f;if(i.statistics&&i.statistics.length)t=null!=i.statistics[0].min?i.statistics[0].min:i.statistics[0][0],l=null!=i.statistics[0].max?i.statistics[0].max:i.statistics[0][1];else t=null==(p=i)?void 0:p.outputMin,l=null==(f=i)?void 0:f.outputMax;let s=[];const n=u(e.renderingRule?await e.generateRasterInfo(e.renderingRule):e.serviceRasterInfo),o=n.keyProperties.BandProperties;1===n.bandCount?(t=null!=t?t:n.statistics&&n.statistics[0].min,l=null!=l?l:n.statistics&&n.statistics[0].max,t||l?r.push(this._getStretchLegendElements(i,{min:t,max:l})):this._getServerSideLegend()):e.bandIds&&1===e.bandIds.length?(t=null!=t?t:n.statistics&&n.statistics[e.bandIds[0]].min,l=null!=l?l:n.statistics&&n.statistics[e.bandIds[0]].max,t||l?r.push(this._getStretchLegendElements(i,{min:t,max:l})):this._getServerSideLegend()):n.bandCount>=3?o&&o.length>=n.bandCount?e.bandIds&&3===e.bandIds.length?(s=e.bandIds.map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(s)):\"lerc\"===e.format?(s=[0,1,2].map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():\"lerc\"===e.format?(s=[\"band1\",\"band2\",\"band3\"],a.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():this._getServerSideLegend()}}else if(te(i))i.colormapInfos.forEach((e=>{a.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(Z,e.color)})}));else if(ne(i)){let e=i.symbol;switch(t.geometryType){case\"point\":e=\"pointSymbol\"in n&&n.pointSymbol;break;case\"polyline\":e=\"lineSymbol\"in n&&n.lineSymbol;break;case\"polygon\":e=\"polygonSymbol\"in n&&n.polygonSymbol}i.symbol&&!this._hasSizeRamp&&a.infos.push({label:i.label,symbol:e})}else if(ee(i)){i.outputUnit&&(this.title=\"(\"+i.toJSON().outputUnit+\")\"),a.title=i.attributeField;const e=i.getClassBreakInfos();null!=e&&e.length?e.forEach((e=>{a.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})})):a.infos.push({label:i.attributeField,symbol:i.getDefaultSymbol()})}else se(i)&&r.push(this._getStretchLegendElements(i,{min:0,max:255}));const g=i.defaultSymbol;!g||d||ne(i)||o&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||r.push({type:\"symbol-table\",infos:[{label:i.defaultLabel||\"others\",symbol:g}]}),a.infos.length&&r.unshift(a);const b=null==t.opacity?this.opacity:t.opacity,S=this._isTallSymbol(\"visualVariables\"in i&&i.visualVariables),_=ve(this.layer)||Le(this.layer),v=r.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]).filter((e=>!(!e||!e.symbol))).map((e=>this._getSymbolPreview(e,b,{applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:{isTall:S,isSquareFill:_}})));return i=null,await c(v),r}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=null==e?void 0:e.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,l;const s=this.layer,n=s.rasterInfo,i=n.bandCount||e.statistics.length;let r,a,o=[];const u=n.keyProperties&&n.keyProperties.BandProperties,d=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==n?void 0:n.statistics;if(d)r=void 0!==d[0].min?d[0].min:d[0][0],a=d[0].max||d[0][1];else{const e=Q[s.rasterInfo.pixelType.toLowerCase()];r=e[0],a=e[1]}if(s.hasStandardTime()&&(r=s.getStandardTimeValue(r),a=s.getStandardTimeValue(a)),1===n.bandCount||1===(null==(l=s.bandIds)?void 0:l.length))return this._getStretchLegendElements(e,{min:r,max:a});function c(e){var t;const l=(null!=s&&null!=(t=s.bandIds)&&t.length?s.bandIds:Array.from(Array(Math.min(n.bandCount,3)).keys())).map((t=>e&&e[t]&&e[t].BandName||\"band\"+(t+1)));return l.length<3?l.push(l[1]):l.length>3&&l.splice(3),l}return o=u&&u.length>=i?c(u):c(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(e,t){const l=e.colorRamp,s=M(l,t);return{type:\"stretch-ramp\",title:\"\",infos:s,preview:C(s.map((e=>e.color)))}}_createSymbolTableElementMultiBand(e){const t=[],l=[\"red\",\"green\",\"blue\"];return e.forEach(((e,s)=>{t.push({label:{colorName:l[s],bandName:e},src:A[s],opacity:1})})),t}_updateInfosforClassedSizeRenderer(e,t){const l=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,s=e.classBreakInfos.some((e=>T(e.symbol)));if(l&&s){const l=U,s=k,n=e.classBreakInfos.length,i=(l-s)/(n>1?n-1:n);t.forEach(((e,t)=>{e.size=l-i*t}))}}_isTallSymbol(e){let t=!1,l=!1;if(e)for(let s=0;s<e.length&&(!t||!l);s++){const n=e[s];\"size\"===n.type&&(\"height\"===n.axis&&(t=!0),\"width-and-depth\"===n.axis&&(l=!0))}return t&&l}async _getSymbolPreview(e,t,l){let s=null==e.size&&this._hasSizeRamp?h(22):e.size;if(this._scaleDrivenSizeVariable&&null!=l&&l.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");s=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}return F(e.symbol,{size:s,opacity:t,scale:!1,symbolConfig:null==l?void 0:l.symbolConfig}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}async _loadRenderer(e){var t,l;const s=[],n=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const i=\"visualVariables\"in e&&(null==(t=e.visualVariables)?void 0:t.some((e=>\"size\"===e.type&&\"outline\"!==e.target&&!X.test(e.valueExpression))));if(e&&\"visualVariables\"in e&&!i&&\"featureReduction\"in n&&\"cluster\"===(null==(l=n.featureReduction)?void 0:l.type)){const t=this.layerView._effectiveRenderer,l=u(V(t,this.view));if(l){const t=n.featureReduction;if(\"clusterMinSize\"in t&&\"clusterMaxSize\"in t){const{clusterMinSize:e,clusterMaxSize:s}=t;l.legendOptions=new E({showLegend:e!==s})}const s=e.visualVariables||[];e.visualVariables=s.concat([l]),this._hasClusterSizeVariable=!0}}const r=await this._getMedianColor(e);if(ie(e)||re(e)){const t=(e.classBreakInfos||e.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,r).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(s,t)}return s.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:r).then((t=>{this._applySymbolToRenderer(e,t,ne(e))})).catch((()=>{this._applySymbolToRenderer(e,null,ne(e))}))),c(s).then((()=>e))}_applySymbolToRenderer(e,t,l){l?e.symbol=t:e.defaultSymbol=t}async _getMedianColor(e){if(!(\"visualVariables\"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>\"color\"===e.type));if(!t)return null;let l=null,s=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;l=t.stops[0].value,s=t.stops[t.stops.length-1].value}const n=l+(s-l)/2,{getColor:i}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return i(t,n)}_fetchSymbol(e,t){if(!e)return Promise.reject();if(\"web-style\"===e.type){const l=e.portal,s=l&&l.url,n=l&&l.user&&l.user.username,i=e.name+\"-\"+e.styleName+\"-\"+e.styleUrl+\"-\"+s+\"-\"+n,r=this._webStyleSymbolCache;return r.has(i)||(\"2d\"===this.view.type?r.set(i,e.fetchCIMSymbol()):r.set(i,e.fetchSymbol())),r.get(i).then((e=>this._getAppliedCloneSymbol(e,t))).catch((()=>(q.warn(\"Fetching web-style failed!\"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,l){if(!e||!l)return e;const s=e.clone(),n=l&&l.toRgba();return s.type.indexOf(\"3d\")>-1?this._applyColorTo3dSymbol(s,n):\"cim\"===s.type?I(s,l):s.color&&(s.color=new t(n||s.color)),s}_applyColorTo3dSymbol(e,l){l&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new t(l))}))}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||!e.visualVariables||\"vector-field\"===e.type)return null;const l=e.visualVariables,s=[],n=[],i=[];for(const u of l)\"color\"===u.type?s.push(u):\"size\"===u.type?n.push(u):\"opacity\"===u.type&&i.push(u);const r=[...s,...n,...i];let a,o;if(0===s.length&&ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];a=t&&t.symbol}if(0===s.length&&ne(e)&&(a=e.symbol),a)if(a.type.indexOf(\"3d\")>-1){const e=a.symbolLayers.getItemAt(0);\"water\"===e.type?d(e.color)&&(o=e.color):d(e.material)&&d(e.material.color)&&(o=e.material.color)}else a.url||(o=a.color);return(await Promise.all(r.map((async l=>{if(!l.legendOptions||!1!==l.legendOptions.showLegend){const s=this._getRampTitle(l,t);let n=null;const i=\"getField\"in t&&t.getField&&t.getField(l.field),r=i&&v(i);if(\"color\"===l.type){const e=await j(l,null,r);n={type:\"color-ramp\",title:s,infos:e,preview:C(e.map((e=>e.color)))},this._hasColorRamp||(this._hasColorRamp=!(null==n.infos||!n.infos.length))}else if(\"size\"===l.type&&\"outline\"!==l.target)X.test(l.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=l):(n={type:\"size-ramp\",title:this._hasClusterSizeVariable?this._getClusterTitle(l):s,infos:await B(e,l,await this._getMedianColor(e),this.scale,this.view.type,r)},this._hasSizeRamp||(this._hasSizeRamp=!(null==n.infos||!n.infos.length)));else if(\"opacity\"===l.type){const e=await j(l,o,r);n={type:\"opacity-ramp\",title:s,infos:e,preview:C(e.map((e=>e.color)))},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==n.infos||!n.infos.length))}return n&&n.infos?n:null}})))).filter((e=>!!e))}_getDomainName(e,t,l){if(e&&\"function\"!=typeof e){const s=\"getField\"in l&&l.getField&&l.getField(e),n=s&&\"getFieldDomain\"in l&&l.getFieldDomain?l.getFieldDomain(s.name):null;return n&&\"coded-value\"===n.type?n.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,l=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,s=\"popupTemplate\"in e&&e.popupTemplate,n=s&&s.fieldInfos;if(n)for(const t of n)if(t.fieldName===l)return\"cluster_count\"===l?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let l=e.field,s=e.normalizationField,n=!1,i=!1,r=!1,a=null;l=\"function\"==typeof l?null:l,s=\"function\"==typeof s?null:s;const o=e.legendOptions&&e.legendOptions.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const l=e[t];if(\"color\"===l.type){if(\"ratio\"===l.style){n=!0;break}if(\"percent\"===l.style){i=!0;break}if(\"percent-of-total\"===l.style){r=!0;break}}}}a={field:l&&this._getFieldAlias(l,t),normField:s&&this._getFieldAlias(s,t),ratio:n,ratioPercent:i,ratioPercentTotal:r}}return a}_getRendererTitle(e,t){const l=e;if(l.legendOptions&&l.legendOptions.title)return l.legendOptions.title;if(l.valueExpressionTitle)return l.valueExpressionTitle;let s=l.field,n=null,i=null;ie(l)&&(n=l.normalizationField,i=\"percent-of-total\"===l.normalizationType),s=\"function\"==typeof s?null:s,n=\"function\"==typeof n?null:n;let r=null;return(s||n)&&(r={field:s&&this._getFieldAlias(s,t),normField:n&&this._getFieldAlias(n,t),normByPct:i}),r}_getFieldAlias(e,t){const l=\"popupTemplate\"in t&&t.popupTemplate,s=l&&l.fieldInfos;let n=null;s&&s.some((t=>e===t.fieldName&&(n=t,!0)));let i=null;\"getField\"in t&&t.getField?i=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(i=t.fieldsIndex.get(e));const r=n||i;let a=null;return r&&(a=n&&n.label||i&&i.alias||\"name\"in r&&r.name||\"fieldName\"in r&&r.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let l=!1;return ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(l=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),l}};e([b()],Te.prototype,\"children\",void 0),e([b()],Te.prototype,\"layerView\",void 0),e([b()],Te.prototype,\"layer\",void 0),e([b()],Te.prototype,\"legendElements\",void 0),e([b({readOnly:!0})],Te.prototype,\"opacity\",null),e([b()],Te.prototype,\"parent\",void 0),e([b({readOnly:!0,dependsOn:[]})],Te.prototype,\"ready\",null),e([b()],Te.prototype,\"keepCacheOnDestroy\",void 0),e([b()],Te.prototype,\"respectLayerVisibility\",void 0),e([b({readOnly:!0})],Te.prototype,\"scale\",null),e([b()],Te.prototype,\"sublayerIds\",void 0),e([b({readOnly:!0})],Te.prototype,\"isScaleDriven\",null),e([b()],Te.prototype,\"title\",void 0),e([b({readOnly:!0,dependsOn:[\"ready\"],value:0})],Te.prototype,\"version\",null),e([b()],Te.prototype,\"view\",void 0),Te=e([S(\"esri.widgets.Legend.support.ActiveLayerInfo\")],Te);var Ve=Te;export default Ve;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import s from\"../../core/Handles.js\";import{init as t,watch as a,whenTrue as n}from\"../../core/watchUtils.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import y from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as d}from\"../../intl/locale.js\";const h={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},c=r.ofType(y),L=[\"esri.layers.BuildingSceneLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.TileLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\"],_=\"view.basemapView.baseLayerViews\",f=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",p=[_,f,\"view.layerViews\",v];let u=class extends i{constructor(e){super(e),this._handles=new s,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this.activeLayerInfos=new c,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(t(this,\"view\",this._viewHandles),h.view),this._handles.add(d((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get(\"view.ready\")?\"ready\":\"disabled\"}_viewHandles(){this._handles.remove(h.state),this.view&&this._handles.add(t(this,\"state\",this._stateHandles),h.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([h.allLayerViews,h.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on(\"change\",this._allLayerViewsChangeHandle.bind(this)),h.allLayerViews),this._handles.add(a(this,\"layerInfos, basemapLegendVisible, groundLegendVisible\",this._propertiesChangeHandle.bind(this)),h.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const i=[];e.forEach((r=>{if(!r.parent){const s=r.layer.parent,t=s&&\"uid\"in s&&this._layerViewByLayerId[s.uid],a=t&&this._activeLayerInfosByLayerViewId[t.uid];a&&-1!==e.indexOf(a)&&(i.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children))}})),e.removeMany(i);const r={};this.view.allLayerViews.forEach(((e,i)=>r[e.layer.uid]=i)),e.sort(((e,i)=>{const s=r[e.layer.uid]||0;return(r[i.layer.uid]||0)-s}))}_generateLayerViews(){const e=[];return p.filter(this._filterLayerViews,this).map(this.get,this).filter((e=>null!=e)).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===_||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=s=>(s&&s.forEach((s=>{i.push(s),r(s[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!L.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(a(e,\"legendEnabled, layer.legendEnabled\",(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get(\"layer.legendEnabled\")}_buildActiveLayerInfo(e){var i;const r=e.layer,s=e.uid,t=this._layerInfosByLayerViewId[s];let l=this._activeLayerInfosByLayerViewId[s];if(!l){const i=t&&void 0!==t.title&&t.layer.uid===r.uid;l=new y({layer:r,layerView:e,title:i?t.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:t&&t.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[s]=l}const o=r.parent&&\"uid\"in r.parent&&this._layerViewByLayerId[null==(i=r.parent)?void 0:i.uid];if(l.parent=this._activeLayerInfosByLayerViewId[null==o?void 0:o.uid],!this._handles.has(s)){const i=[a(r,\"title\",(e=>this._titleHandle(e,l))),a(r,\"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?\",(()=>this._constructLegendElements(l))),n(this.view,\"stationary\",(()=>this._scaleHandle(l))),a(e,\"_effectiveRenderer\",(()=>this._constructLegendElements(l)))];if(this.respectLayerVisibility){const s=a(e,\"legendEnabled\",(e=>this._legendEnabledHandle(e,l))),t=a(r,\"legendEnabled\",(e=>this._legendEnabledHandle(e,l)));i.push(s,t)}this._handles.add(i,s)}l.isScaleDriven||this._constructLegendElements(l),this._addActiveLayerInfo(l)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){e.isScaleDriven&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&-1===this.activeLayerInfos.indexOf(e)){const i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else{var s;const i=null==(s=this.layerInfos)?void 0:s.some((e=>e.layer.uid===r.uid));r.parent&&\"uid\"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,s=r&&\"uid\"in r&&this._layerViewByLayerId[null==r?void 0:r.uid],t=this._activeLayerInfosByLayerViewId[null==s?void 0:s.uid];t&&(e.push(i),i.parent=t)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;\"featureCollections\"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):\"renderer\"in i&&i.renderer?e.buildLegendElementsForRenderer(i.renderer):\"url\"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};e([l({type:c})],u.prototype,\"activeLayerInfos\",void 0),e([l()],u.prototype,\"basemapLegendVisible\",void 0),e([l()],u.prototype,\"groundLegendVisible\",void 0),e([l()],u.prototype,\"keepCacheOnDestroy\",void 0),e([l()],u.prototype,\"respectLayerVisibility\",void 0),e([l()],u.prototype,\"layerInfos\",void 0),e([l({readOnly:!0})],u.prototype,\"state\",null),e([l()],u.prototype,\"view\",void 0),u=e([o(\"esri.widgets.Legend.LegendViewModel\")],u);var I=u;export default I;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{generateFillAttributes as e,generateStrokeAttributes as a,renderDef as r,renderShape as l,getBoundingBox as t,computeBBox as s,getTransformMatrix as i}from\"../../../../symbols/support/svgUtils.js\";import{classes as o}from\"../../../support/widgetUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import{tsx as n}from\"../../../support/jsxFactory.js\";const d=\"http://www.w3.org/2000/svg\",m={diamondContainer:\"esri-relationship-ramp--diamond__container\",diamondLeftCol:\"esri-relationship-ramp--diamond__left-column\",diamondRightCol:\"esri-relationship-ramp--diamond__right-column\",diamondMidCol:\"esri-relationship-ramp--diamond__middle-column\",diamondMidColLabel:\"esri-relationship-ramp--diamond__middle-column--label\",diamondMidColRamp:\"esri-relationship-ramp--diamond__middle-column--ramp\",squareTable:\"esri-relationship-ramp--square__table\",squareTableRow:\"esri-relationship-ramp--square__table-row\",squareTableCell:\"esri-relationship-ramp--square__table-cell\",squareTableLabel:\"esri-relationship-ramp--square__table-label\",squareTableLabelLeftBottom:\"esri-relationship-ramp--square__table-label--left-bottom\",squareTableLabelRightBottom:\"esri-relationship-ramp--square__table-label--right-bottom\",squareTableLabelLeftTop:\"esri-relationship-ramp--square__table-label--left-top\",squareTableLabelRightTop:\"esri-relationship-ramp--square__table-label--right-top\"};function u(e,a,r){const{focus:l,labels:t}=e,s=!!l,i=p(e,a,r);return s?n(\"div\",{class:m.diamondContainer},n(\"div\",{class:m.diamondLeftCol},t.left),n(\"div\",{class:m.diamondMidCol},n(\"div\",{class:m.diamondMidColLabel},t.top),i,n(\"div\",{class:m.diamondMidColLabel},t.bottom)),n(\"div\",{class:m.diamondRightCol},t.right)):n(\"div\",{class:m.squareTable},n(\"div\",{class:m.squareTableRow},n(\"div\",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelRightBottom)},t.left),n(\"div\",{class:m.squareTableCell}),n(\"div\",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelLeftBottom)},t.top)),n(\"div\",{class:m.squareTableRow},n(\"div\",{class:m.squareTableCell}),i,n(\"div\",{class:m.squareTableCell})),n(\"div\",{class:m.squareTableRow},n(\"div\",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelRightTop)},t.bottom),n(\"div\",{class:m.squareTableCell}),n(\"div\",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelLeftTop)},t.right)))}function b(e,a,r){const l=`${r}_arrowStart`,t=`${r}_arrowEnd`,s=\"left\"===e,i={markerStart:null,markerEnd:null};switch(a){case\"HL\":s?i.markerStart=`url(#${t})`:i.markerEnd=`url(#${l})`;break;case\"LL\":i.markerStart=`url(#${t})`;break;case\"LH\":s?i.markerEnd=`url(#${l})`:i.markerStart=`url(#${t})`;break;default:i.markerEnd=`url(#${l})`}return i}function p(o,u,p,c=60){const{focus:h,numClasses:q,colors:k,rotation:f}=o,T=!!h,_=Math.sqrt(c**2+c**2)+(T?0:5);let L=null;null!=p&&(L=`opacity: ${p}`);const g=[],C=[],v=[],w=(c||75)/q;for(let s=0;s<q;s++){const i=s*w;for(let o=0;o<q;o++){const n=o*w,d=e(k[s][o]),m=a(null),u={type:\"rect\",x:n,y:i,width:w,height:w};g.push(r(d)),C.push(l(u,d.fill,m,null)),v.push(t(u))}}const y=10,x=15,R=15,$=10;let E=null;T||(E=\"margin: -15px -15px -18px -15px\");const M=b(\"left\",h,u),S=b(\"right\",h,u),j=s(v),B=i(j,_,_,0,!1,f,!1),H=i(j,_,_,0,!1,T?-45:null,!1);return n(\"div\",{style:L,class:T?m.diamondMidColRamp:m.squareTableCell},n(\"svg\",{xmlns:d,width:_,height:_,style:E},n(\"defs\",null,n(\"marker\",{id:`${u}_arrowStart`,markerWidth:\"10\",markerHeight:\"10\",refX:\"5\",refY:\"5\",markerUnits:\"strokeWidth\",orient:\"auto\"},n(\"polyline\",{points:\"0,0 5,5 0,10\",fill:\"none\",stroke:\"#555555\",\"stroke-width\":\"1\"})),n(\"marker\",{id:`${u}_arrowEnd`,markerWidth:\"10\",markerHeight:\"10\",refX:\"0\",refY:\"5\",markerUnits:\"strokeWidth\",orient:\"auto\"},n(\"polyline\",{points:\"5,0 0,5 5,10\",fill:\"none\",stroke:\"#555555\",\"stroke-width\":\"1\"})),g),n(\"g\",{transform:B},C),n(\"g\",{transform:H},n(\"line\",{fill:\"none\",stroke:\"#555555\",\"stroke-width\":\"1\",\"marker-start\":M.markerStart,\"marker-end\":M.markerEnd,x1:-y,y1:c-x,x2:-y,y2:x}),n(\"line\",{fill:\"none\",stroke:\"#555555\",\"stroke-width\":\"1\",\"marker-start\":S.markerStart,\"marker-end\":S.markerEnd,x1:R,y1:c+$,x2:c-R,y2:c+$}))))}export{u as renderRelationshipRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{renderColorRampPreviewHTML as o}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import{tsx as i}from\"../../../support/jsxFactory.js\";const l=t(),r=10,n=20,s=10,a=20,c={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function p(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?i(\"svg\",{height:\"4\",width:\"10\"},i(\"line\",{x1:\"0\",y1:\"2\",x2:\"10\",y2:\"2\",style:t})):i(\"svg\",{height:\"10\",width:\"10\"},i(\"line\",{x1:\"5\",y1:\"0\",x2:\"5\",y2:\"10\",style:t}))}function f(e,t=\"vertical\"){const o=document.createElement(\"div\");return o.style.height=`${n}px`,o.className=c.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l.append(o,p.bind(null,t)),o}function m(t,o,i=\"vertical\",l){t.infos.forEach(((t,r)=>{if(l&&2===r)t.preview=f(o,i);else{const o=e(t.size)+(\"horizontal\"===i?a:s),l=\"div\"===t.preview.tagName.toLowerCase(),r=l?t.preview:document.createElement(\"div\");r.className=c.univariateAboveAndBelowSymbol,\"horizontal\"===i?r.style.width=`${o}px`:r.style.height=`${o}px`,l||r.appendChild(t.preview),t.preview=r}}))}function u(t,o=\"classic\"){const i=t.infos;return\"classic\"===o?(e(i[0].size)+s)/2:(e(i[0].size)-e(i[i.length-1].size))/2}function v(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=o(\"full\"===t.type?i:\"above\"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment});return l.className=c.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function h(t,o,i,l=\"vertical\"){let c=0;const p=t.infos,f=Math.floor(p.length/2),m=\"full\"===o||\"above\"===o?0:f,u=\"full\"===o||\"below\"===o?p.length-1:f;for(let v=m;v<=u;v++)if(i&&v===f)c+=\"horizontal\"===l?r:n;else{c+=e(p[v].size)+(\"horizontal\"===l?a:s)}return Math.round(c)}function y(t,o,i,l=\"vertical\"){const c=h(t,o,i,l),p=t.infos,f=Math.floor(p.length/2),m=\"full\"===o||\"above\"===o?0:f,u=\"full\"===o||\"below\"===o?p.length-1:f,v=\"full\"===o?p[m].size+p[u].size:\"above\"===o?p[m].size:p[u].size,y=i?\"vertical\"===l?n:r:0,d=\"vertical\"===l?s*(\"full\"===o?2:1):a*(\"full\"===o?2:1);return Math.round(c-(e(v)/2+y/2+d/2))}function d(e,t,o=\"vertical\"){const i=e.infos;let l=i.filter((({type:e})=>\"size-ramp\"===e))[0],r=i.filter((({type:e})=>\"color-ramp\"===e))[0];var n;(l&&(l={...l},l.infos=[...l.infos]),r&&(r={...r},r.infos=[...r.infos]),m(l,t,o,!0),\"horizontal\"===o)&&(l.infos.reverse(),null==(n=r)||n.infos.reverse());return{sizeRampElement:l,colorRampElement:r}}function g(e,t=\"vertical\"){const o=e.infos;let i=o.filter((({type:e})=>\"size-ramp\"===e))[0],l=o.filter((({type:e})=>\"color-ramp\"===e))[0];var r;(i&&(i={...i},i.infos=[...i.infos]),l&&(l={...l},l.infos=[...l.infos]),m(i,null,t,!1),\"horizontal\"===t)&&(i.infos.reverse(),null==(r=l)||r.infos.reverse());return{sizeRampElement:i,colorRampElement:l}}export{d as getUnivariateAboveAndBelowRampElements,u as getUnivariateColorRampMargin,v as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,g as getUnivariateColorSizeRampElements,h as getUnivariateSizeRampSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{substitute as e}from\"../../../intl/substitute.js\";function n(e,n){return n}function t(e){const n=this;e.appendChild(n)}function r(t,r,i){if(!r)return;if(\"string\"==typeof r||\"number\"==typeof r)return r;if(\"value\"in r||\"unit\"in r)return e(t.dotValue,r);if(\"colorName\"in r||\"bandName\"in r)return t[r.colorName]+\": \"+(t[r.bandName]||r.bandName);if(\"showCount\"in r)return r.showCount?t.clusterCountTitle:null;let l=null;return n(r,i)?l=r.ratioPercentTotal?\"showRatioPercentTotal\":r.ratioPercent?\"showRatioPercent\":r.ratio?\"showRatio\":r.normField?\"showNormField\":r.field?\"showField\":null:o(r,i)&&(l=r.normField?\"showNormField\":r.normByPct?\"showNormPct\":r.field?\"showField\":null),l?e(\"showField\"===l?\"{field}\":t[l],{field:r.field,normField:r.normField}):null}function o(e,n){return!n}function i(e,n){return!!(n&&\"Stretched\"===n&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}export{t as attachToNode,r as getTitle,i as isImageryStretchedLegend,o as isRendererTitle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../intl.js\";import t from\"../../../core/Handles.js\";import{pt2px as s}from\"../../../core/screenUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as a}from\"../../../symbols/support/svgUtils.js\";import o from\"../../Widget.js\";import{renderRelationshipRamp as l}from\"./support/relationshipUtils.js\";import{getUnivariateAboveAndBelowRampElements as n,getUnivariateSizeRampSize as c,getUnivariateColorRampSize as d,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as m,getUnivariateColorSizeRampElements as h}from\"./support/univariateUtils.js\";import{getTitle as y,attachToNode as g,isImageryStretchedLegend as _}from\"../support/styleUtils.js\";import{Heading as v}from\"../../support/Heading.js\";import{accessibleHandler as u}from\"../../support/decorators/accessibleHandler.js\";import{messageBundle as b}from\"../../support/decorators/messageBundle.js\";import{tsx as f}from\"../../support/jsxFactory.js\";import\"../../support/widgetUtils.js\";import{substitute as w}from\"../../../intl/substitute.js\";const L={activated:\"esri-legend--card__carousel-indicator--activated\",base:\"esri-legend--card\",stacked:\"esri-legend--stacked\",carouselTitle:\"esri-legend--card__carousel-title\",indicator:\"esri-legend--card__carousel-indicator\",intervalSeparator:\"esri-legend--card__interval-separator\",imageryLayerStretchedImage:\"esri-legend--card__imagery-layer-image--stretched\",imageLabel:\"esri-legend--card__image-label\",layerCaption:\"esri-legend--card__layer-caption\",labelElement:\"esri-legend--card__label-element\",layerRow:\"esri-legend--card__layer-row\",labelCell:\"esri-legend--card__label-cell\",message:\"esri-legend--card__message\",rampLabel:\"esri-legend--card__ramp-label\",section:\"esri-legend--card__section\",relationshipSection:\"esri-legend--card__relationship-section\",serviceCaptionText:\"esri-legend--card__service-caption-text\",serviceContent:\"esri-legend--card__service-content\",service:\"esri-legend--card__service\",groupLayer:\"esri-legend--card__group-layer\",groupLayerChild:\"esri-legend--card__group-layer-child\",symbol:\"esri-legend--card__symbol\",sizeRampRow:\"esri-legend--card__size-ramp-row\",symbolRow:\"esri-legend--card__symbol-row\",symbolCell:\"esri-legend--card__symbol-cell\",indicatorContainer:\"esri-legend--card__carousel-indicator-container\",intervalSeparatorsContainer:\"esri-legend--card__interval-separators-container\",relationshipLabelContainer:\"esri-legend--card__relationship-label-container\",labelContainer:\"esri-legend--card__label-container\",serviceCaptionContainer:\"esri-legend--card__service-caption-container\",symbolContainer:\"esri-legend--card__symbol-container\",sizeRampContainer:\"esri-legend--card__size-ramp-container\",sizeRampPreview:\"esri-legend--card__size-ramp-preview\",rampContainer:\"esri-legend__ramps\",sizeRampHorizontal:\"esri-legend__size-ramp--horizontal\",rampLabelsContainer:\"esri-legend__ramp-labels\",layerInfo:\"esri-legend__layer-cell esri-legend__layer-cell--info\",univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\",hidden:\"esri-hidden\"},C=25,x=25,S=768,z=100,R=\"#ddd\",$=window.devicePixelRatio;function I(e){if(e){if(e.type.indexOf(\"3d\")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1),i=s.resource&&s.resource.primitive;return\"circle\"===i||\"cross\"===i||\"kite\"===i||\"sphere\"===i||\"cube\"===i||\"diamond\"===i}{const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}}}function k(e){if(e){if(e.type.indexOf(\"3d\")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1).get(\"resource.primitive\");return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let N=class extends o{constructor(e,s){super(e,s),this._handles=new t,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=\"stack\",this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}initialize(){this.own([this.watch(\"activeLayerInfos\",(e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))])}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=\"auto\"===this.layout&&this.view.container.clientWidth<=S||\"stack\"===this.layout;const e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const s=this._sectionNames.length,i=this._sectionNames.map(((e,t)=>{const i=w(this.messagesCommon.pagination.pageText,{index:t+1,total:s});return f(\"div\",{key:e,role:\"tab\",id:e,\"aria-label\":i,\"aria-controls\":`${e}-panel`,\"aria-selected\":(this._selectedSectionName===e).toString(),tabIndex:this._selectedSectionName===e?0:-1,title:i,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(L.indicator,{[L.activated]:this._selectedSectionName===e}),\"data-section-name\":e})})),r=this._hasIndicators&&s>1?f(\"div\",{class:L.indicatorContainer,key:\"carousel-navigation\",role:\"tablist\"},i):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[L.stacked]:this._hasIndicators};return f(\"div\",{class:this.classes(L.base,o)},a||f(\"div\",{class:L.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute(\"data-section-name\");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case\"ArrowLeft\":case\"ArrowRight\":this._switchSectionOnArrowPress(e);break;case\"Enter\":case\" \":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,s=\"ArrowLeft\"===t?-1:1,i=e.target.getAttribute(\"data-section-name\"),r=this._sectionNames.indexOf(i),a=this._sectionNames;let o=null;-1!==r&&(a[r+s]?o=document.getElementById(a[r+s]):\"ArrowLeft\"===t?o=document.getElementById(a[a.length-1]):\"ArrowRight\"===t&&(o=document.getElementById(a[0])),o&&o.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const t=`activeLayerInfo-${e.layer.uid}-version-change`;this._handles.remove(t),this._watchForSectionChanges(e.children),this._handles.add(e.watch(\"version\",(()=>this._generateSectionNames())),t)}));const t=\"activeLayerInfos-collection-change\";this._handles.remove(t),this._handles.add(e.on(\"change\",(()=>this._watchForSectionChanges(e))),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,s){return`${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s))}))}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return f(\"div\",{key:e.layer.uid,class:this.classes(L.service,L.groupLayer)},f(\"div\",{class:L.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some((e=>\"relationship-ramp\"===e.type)),i=t.map(((t,i)=>this._renderLegendForElement(t,e,i,s))).filter((e=>!!e));if(!i.length)return null;const r={[L.groupLayerChild]:!!e.parent};return f(\"div\",{key:e.layer.uid,class:this.classes(L.service,r)},f(\"div\",{class:L.serviceCaptionContainer},f(\"div\",{class:L.serviceCaptionText},e.title)),f(\"div\",{class:L.serviceContent},i))}}_renderLegendForElement(e,t,s,i=!1){const r=\"color-ramp\"===e.type,a=\"opacity-ramp\"===e.type,o=\"size-ramp\"===e.type,n=t.layer;let c=null;if(\"string\"==typeof e.title)c=e.title;else if(e.title){const t=e.title,s=y(this.messages,t,r||a);c=t.title?`${t.title} (${s})`:s}const d=this._getSectionName(n,e,s),p=this._hasIndicators?f(\"div\",null,f(v,{level:this.headingLevel,class:L.carouselTitle},t.title),f(v,{level:this.headingLevel+1,class:L.layerCaption},c)):c?f(v,{level:this.headingLevel,class:L.layerCaption},c):null;let m=null;if(\"symbol-table\"===e.type){const s=e.infos.map(((s,i)=>this._renderLegendForElementInfo(s,t,e.legendType,i))).filter((e=>!!e));if(s.length){const e=s[0].properties.classes&&s[0].properties.classes[L.symbolRow],t={[L.labelContainer]:!e&&!i,[L.relationshipLabelContainer]:i};m=f(\"div\",{class:this.classes(t)},s)}}else\"color-ramp\"===e.type||\"opacity-ramp\"===e.type||\"heatmap-ramp\"===e.type?m=this._renderLegendForRamp(e,n.opacity):o?m=this._renderSizeRamp(e,n.opacity):\"relationship-ramp\"===e.type?m=l(e,this.id,n.opacity):\"univariate-above-and-below-ramp\"===e.type?m=this._renderUnivariateAboveAndBelowRamp(e,n.opacity):\"univariate-color-size-ramp\"===e.type&&(m=this._renderUnivariateColorSizeRamp(e,n.opacity));if(!m)return null;const h=f(\"div\",{key:d,class:L.section,id:`${d}-panel`,role:\"tabpanel\",\"aria-labelledby\":d,tabIndex:0},[p,m]);return this._sectionMap.set(d,h),h}_renderUnivariateAboveAndBelowRamp(e,t){const{sizeRampElement:s,colorRampElement:i}=n(e,t,\"horizontal\"),r=c(s,\"full\",!0,\"horizontal\"),a=d(s,\"above\",!0,\"horizontal\"),o=d(s,\"below\",!0,\"horizontal\"),l=12,h=p(i,{width:a,height:l,rampAlignment:\"horizontal\",opacity:t,type:\"above\"}),y=p(i,{width:o,height:l,rampAlignment:\"horizontal\",opacity:t,type:\"below\"}),_=m(s,\"card\"),v=s.infos.map((e=>e.label)),u=v.length-1,b=v.map(((e,t)=>0===t||t===u?f(\"div\",{key:t},e):null)),w={display:\"flex\",flexDirection:\"column\"},C={display:\"flex\",flexDirection:\"row\"},x={marginTop:\"3px\",marginLeft:`${_}px`,display:\"flex\"},S={width:`${r}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return f(\"div\",{class:L.layerRow,key:\"size-ramp-preview\",styles:w},f(\"div\",{class:this.classes(L.symbolContainer,L.sizeRampHorizontal),styles:C},s.infos.map(((e,t)=>f(\"div\",{key:t,class:L.symbol,bind:e.preview,afterCreate:g})))),h?f(\"div\",{class:L.univariateAboveAndBelowColorRamp,styles:x,key:\"color-ramp-preview\"},f(\"div\",{bind:h,afterCreate:g}),f(\"div\",{bind:y,afterCreate:g})):null,f(\"div\",{class:L.layerInfo},f(\"div\",{class:L.rampLabelsContainer,styles:S},b)))}_renderUnivariateColorSizeRamp(e,t){const{sizeRampElement:s,colorRampElement:i}=h(e,\"horizontal\"),r=c(s,\"full\",!1,\"horizontal\"),a=d(s,\"full\",!1,\"horizontal\"),o=p(i,{width:a,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\"}),l=m(s,\"card\"),n=s.infos.length-1,y=s.infos.map(((e,t)=>0===t||t===n?f(\"div\",{key:t},e.label):null)),_={display:\"flex\",flexDirection:\"column\"},v={display:\"flex\",flexDirection:\"row\"},u={marginTop:\"3px\",marginLeft:`${l}px`,display:\"flex\"},b={width:`${r}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return f(\"div\",{class:L.layerRow,key:\"size-ramp-preview\",styles:_},f(\"div\",{class:this.classes(L.symbolContainer,L.sizeRampHorizontal),styles:v},s.infos.map(((e,t)=>f(\"div\",{key:t,class:L.symbol,bind:e.preview,afterCreate:g})))),f(\"div\",{class:L.univariateAboveAndBelowColorRamp,styles:u,key:\"color-ramp-preview\"},f(\"div\",{bind:o,afterCreate:g})),f(\"div\",{class:L.layerInfo},f(\"div\",{class:L.rampLabelsContainer,styles:b},y)))}_renderLegendForElementInfo(e,t,s,i){const r=t.layer;if(e.type)return this._renderLegendForElement(e,t,i);const a=_(r,s);if(e.preview){var o,l;if(!e.symbol||-1===e.symbol.type.indexOf(\"simple-fill\")){if(!e.label)return f(\"div\",{key:i,bind:e.preview,afterCreate:g});const t={[L.symbolCell]:this._hasIndicators};return f(\"div\",{key:i,class:this.classes(L.layerRow,{[L.symbolRow]:this._hasIndicators})},f(\"div\",{class:this.classes(t),bind:e.preview,afterCreate:g}),f(\"div\",{class:this.classes(L.imageLabel,{[L.labelCell]:this._hasIndicators})},y(this.messages,e.label,!1)||\"\"))}let t=255,s=255,a=255,n=0,c=255,d=255,p=255,m=0;const h=e.symbol.color&&e.symbol.color.a,_=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;h&&(t=e.symbol.color.r,s=e.symbol.color.g,a=e.symbol.color.b,n=e.symbol.color.a*r.opacity),_&&(c=e.symbol.outline.color.r,d=e.symbol.outline.color.g,p=e.symbol.outline.color.b,m=e.symbol.outline.color.a*r.opacity);const v=null==(o=null==(l=e.symbol.color)?void 0:l.isBright)||o,u=v?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\",b={background:h?`rgba(${t}, ${s}, ${a}, ${n})`:\"none\",color:v?\"black\":\"white\",textShadow:`-1px -1px 0 ${u},\\n                                              1px -1px 0 ${u},\\n                                              -1px 1px 0 ${u},\\n                                              1px 1px 0 ${u}`,border:_?`1px solid rgba(${c}, ${d}, ${p}, ${m})`:\"none\"};return f(\"div\",{key:i,class:L.layerRow},f(\"div\",{class:L.labelElement,styles:b},\" \",e.label,\" \"))}if(e.src){const t=this._renderImage(e,r,a);return f(\"div\",{key:i,class:L.layerRow},t,f(\"div\",{class:L.imageLabel},e.label||\"\"))}}_renderImage(e,t,s){const{label:i,src:r,opacity:a}=e,o={[L.imageryLayerStretchedImage]:s,[L.symbol]:!s},l={opacity:`${null!=a?a:t.opacity}`};return f(\"img\",{alt:y(this.messages,i,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(o),styles:l})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],a=i.symbol,o=this._hasIndicators,l=s(i.size+i.outlineSize)*$,n=s(r.size+r.outlineSize)*$,c=o?l:l+50*$,d=o?l/2+50*$:l,p=k(a),m=I(a),h=document.createElement(\"canvas\");h.width=c,h.height=d,h.style.width=h.width/$+\"px\",h.style.height=h.height/$+\"px\";const y=h.getContext(\"2d\");if(o){y.beginPath();const e=0,t=0,s=c/2-n/2,i=d;y.moveTo(e,t),y.lineTo(s,i);const r=c,a=0,o=c/2+n/2,l=d;y.moveTo(r,a),y.lineTo(o,l)}else{y.beginPath();const e=0,t=d/2-n/2,s=c,i=0;y.moveTo(e,t),y.lineTo(s,i);const r=0,a=d/2+n/2,o=c,l=d;y.moveTo(r,a),y.lineTo(o,l)}return y.strokeStyle=R,y.stroke(),f(\"div\",{bind:h,afterCreate:g,styles:o?{display:\"flex\",marginTop:`-${p?0:m?l/2:0}px`,marginBottom:`-${p?n:m?n/2:0}px`}:{display:\"flex\",marginRight:`-${p?0:m?l/2:0}px`,marginLeft:`-${p?0:m?n/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,i=s[0].label,r=s[s.length-1].label;let a=s[0].preview,o=s[s.length-1].preview;const l=this._hasIndicators,n={\"flex-direction\":l?\"column\":\"row-reverse\"};a&&(a=a.cloneNode(!0),a.style.display=\"flex\"),o&&(o=o.cloneNode(!0),o.style.display=\"flex\");const c={opacity:null!=t?`${t}`:\"\"};return f(\"div\",{class:this.classes(L.layerRow,{[L.sizeRampRow]:l})},f(\"div\",{class:L.rampLabel},l?i:r),f(\"div\",{class:L.sizeRampContainer,styles:n},f(\"div\",{bind:a,afterCreate:g,class:L.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),f(\"div\",{bind:o,afterCreate:g,class:L.sizeRampContainer,styles:c})),f(\"div\",{class:L.rampLabel},l?r:i))}_renderLegendForRamp(e,t){const s=e.infos,i=\"heatmap-ramp\"===e.type,r=s.length-1,o=x,l=r>2&&!i?C*r:z,n=l+20,c=10,d=s.slice(0).reverse();d.forEach(((e,t)=>{e.offset=i?e.ratio:t/r}));const p=d.length-1,m=d.length%2!=0&&d[d.length/2|0],h=m&&f(\"div\",{class:L.intervalSeparatorsContainer},f(\"div\",{class:L.intervalSeparator},\"|\"),f(\"div\",{class:L.rampLabel},m.label)),y=s[s.length-1].label,g=s[0].label;let _=null;null!=t&&(_=`opacity: ${t}`);const v=[[{shape:{type:\"path\",path:`M0 ${o/2} L${c} 0 L${c} ${o} Z`},fill:d[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:c,y:0,width:l,height:o},fill:{type:\"linear\",x1:c,y1:0,x2:l+c,y2:0,colors:d},stroke:{width:0}},{shape:{type:\"path\",path:`M${l+c} 0 L${n} ${o/2} L${l+c} ${o} Z`},fill:d[p].color,stroke:{width:0}}]],u=a(v,n,o),{messages:b}=this;return f(\"div\",{class:L.layerRow},f(\"div\",{class:L.rampLabel},i?b[y]:y),f(\"div\",{class:L.symbolContainer},f(\"div\",{style:_},u),h),f(\"div\",{class:L.rampLabel},i?b[g]:g))}};e([i()],N.prototype,\"activeLayerInfos\",void 0),e([i()],N.prototype,\"headingLevel\",void 0),e([i()],N.prototype,\"layout\",void 0),e([i(),b(\"esri/widgets/Legend/t9n/Legend\")],N.prototype,\"messages\",void 0),e([i(),b(\"esri/t9n/common\")],N.prototype,\"messagesCommon\",void 0),e([i({readOnly:!0})],N.prototype,\"type\",void 0),e([i()],N.prototype,\"view\",void 0),e([u()],N.prototype,\"_selectSection\",null),N=e([r(\"esri.widgets.Legend.styles.Card\")],N);var A=N;export default A;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../intl.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../Widget.js\";import{renderRelationshipRamp as s}from\"./support/relationshipUtils.js\";import{getUnivariateAboveAndBelowRampElements as i,getUnivariateColorRampSize as t,getUnivariateColorRampPreview as n,getUnivariateColorRampMargin as o,getUnivariateColorSizeRampElements as p}from\"./support/univariateUtils.js\";import{getTitle as d,isRendererTitle as y,attachToNode as m,isImageryStretchedLegend as c}from\"../support/styleUtils.js\";import{Heading as g}from\"../../support/Heading.js\";import\"../../support/widgetUtils.js\";import{messageBundle as v}from\"../../support/decorators/messageBundle.js\";import{tsx as h}from\"../../support/jsxFactory.js\";import{formatNumber as b}from\"../../../intl/number.js\";const _={service:\"esri-legend__service\",label:\"esri-legend__service-label\",layer:\"esri-legend__layer\",groupLayer:\"esri-legend__group-layer\",groupLayerChild:\"esri-legend__group-layer-child\",layerTable:\"esri-legend__layer-table\",layerTableSizeRamp:\"esri-legend__layer-table--size-ramp\",layerChildTable:\"esri-legend__layer-child-table\",layerCaption:\"esri-legend__layer-caption\",layerBody:\"esri-legend__layer-body\",layerRow:\"esri-legend__layer-row\",layerCell:\"esri-legend__layer-cell\",layerInfo:\"esri-legend__layer-cell esri-legend__layer-cell--info\",imageryLayerStretchedImage:\"esri-legend__imagery-layer-image--stretched\",imageryLayerCellStretched:\"esri-legend__imagery-layer-cell--stretched\",imageryLayerInfoStretched:\"esri-legend__imagery-layer-info--stretched\",symbolContainer:\"esri-legend__layer-cell esri-legend__layer-cell--symbols\",symbol:\"esri-legend__symbol\",rampContainer:\"esri-legend__ramps\",sizeRamp:\"esri-legend__size-ramp\",colorRamp:\"esri-legend__color-ramp\",opacityRamp:\"esri-legend__opacity-ramp\",borderlessRamp:\"esri-legend__borderless-ramp\",rampTick:\"esri-legend__ramp-tick\",rampFirstTick:\"esri-legend__ramp-tick-first\",rampLastTick:\"esri-legend__ramp-tick-last\",rampLabelsContainer:\"esri-legend__ramp-labels\",rampLabel:\"esri-legend__ramp-label\",univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\",message:\"esri-legend__message\",header:\"esri-widget__heading\",hidden:\"esri-hidden\"},u=\"esri-legend__\",f=24,L={display:\"flex\",alignItems:\"flex-start\"},w={marginLeft:\"3px\"},C={display:\"table-cell\",verticalAlign:\"middle\"};let R=class extends a{constructor(e,r){super(e,r),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,r=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return h(\"div\",null,r&&r.length?r:h(\"div\",{class:_.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const r=!!e.children.length,l=`${u}${e.layer.uid}-version-${e.version}`,a=e.title?g({level:this.headingLevel,class:this.classes(_.header,_.label)},e.title):null;if(r){const r=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return h(\"div\",{key:l,class:this.classes(_.service,_.groupLayer)},a,r)}{const r=e.legendElements;if(r&&!r.length)return null;const s=r.map((r=>this._renderLegendForElement(r,e.layer))).filter((e=>!!e));if(!s.length)return null;const i={[_.groupLayerChild]:!!e.parent};return h(\"div\",{key:l,class:this.classes(_.service,i),tabIndex:0},a,h(\"div\",{class:_.layer},s))}}_renderLegendForElement(e,r,l){const a=\"color-ramp\"===e.type,i=\"opacity-ramp\"===e.type,t=\"size-ramp\"===e.type;let n=null;if(\"symbol-table\"===e.type||t){const l=e.infos.map((l=>this._renderLegendForElementInfo(l,r,t,e.legendType))).filter((e=>!!e));l.length&&(n=h(\"div\",{class:_.layerBody},l))}else\"color-ramp\"===e.type||\"opacity-ramp\"===e.type||\"heatmap-ramp\"===e.type||\"stretch-ramp\"===e.type?n=this._renderLegendForRamp(e,r.opacity):\"relationship-ramp\"===e.type?n=s(e,this.id,r.opacity):\"univariate-above-and-below-ramp\"===e.type?n=this._renderUnivariateAboveAndBelowRamp(e,r.opacity):\"univariate-color-size-ramp\"===e.type&&(n=this._renderUnivariateColorSizeRamp(e,r.opacity));if(!n)return null;const o=e.title;let p=null;if(\"string\"==typeof o)p=o;else if(o){const e=d(this.messages,o,a||i);p=y(o,a||i)&&o.title?`${o.title} (${e})`:e}const m=l?_.layerChildTable:_.layerTable,c=p?h(\"div\",{class:_.layerCaption},p):null,g={[_.layerTableSizeRamp]:t||!l};return h(\"div\",{class:this.classes(m,g)},c,n)}_renderUnivariateAboveAndBelowRamp(e,r){const{sizeRampElement:l,colorRampElement:a}=i(e,r),s=t(l,\"above\",!0),p=t(l,\"below\",!0),d=12,y=n(a,{width:d,height:s,rampAlignment:\"vertical\",opacity:r,type:\"above\"}),c=n(a,{width:d,height:p,rampAlignment:\"vertical\",opacity:r,type:\"below\"}),g=o(l),v=l.infos.map((e=>e.label)),b=v.map(((e,r)=>{const l=2===r;return 0===r?h(\"div\",{key:r,class:e?y?_.univariateAboveAndBelowLabel:_.rampLabel:null},e):l?h(\"div\",null):null})),u=v.length-1,f=Math.floor(v.length/2),R=v.map(((e,r)=>r===f||r===u?h(\"div\",{key:r,class:e?y?_.univariateAboveAndBelowLabel:_.rampLabel:null},e):null)),A={display:\"table-cell\",verticalAlign:\"middle\"},S={marginTop:`${g}px`},I={height:`${s}px`},j={height:`${p}px`};return h(\"div\",{key:\"univariate-above-and-below-ramp-preview\",styles:L},h(\"div\",{class:_.layerBody},l.infos.map(((e,r)=>h(\"div\",{class:this.classes(_.layerRow,_.sizeRamp)},h(\"div\",{class:_.symbol,styles:A,bind:e.preview,afterCreate:m}),y||r%2!=0?null:h(\"div\",{class:_.layerInfo},v[r]))))),y?h(\"div\",{styles:S,key:\"color-ramp-preview\"},h(\"div\",{styles:w},h(\"div\",{styles:C},h(\"div\",{class:_.rampContainer,bind:y,afterCreate:m})),h(\"div\",{styles:C},h(\"div\",{class:_.rampLabelsContainer,styles:I},b))),h(\"div\",{styles:w},h(\"div\",{styles:C},h(\"div\",{class:_.rampContainer,bind:c,afterCreate:m})),h(\"div\",{styles:C},h(\"div\",{class:_.rampLabelsContainer,styles:j},R)))):null)}_renderUnivariateColorSizeRamp(e,r){const{sizeRampElement:l,colorRampElement:a}=p(e),s=o(l),i=12,d=t(l,\"full\",!1),y=n(a,{width:i,height:d,rampAlignment:\"vertical\",opacity:r,type:\"full\"}),c=l.infos.length-1,g=l.infos.map(((e,r)=>0===r||r===c?h(\"div\",{key:r,class:e.label?a?_.univariateAboveAndBelowLabel:_.rampLabel:null},e.label):null)),v={display:\"table-cell\",verticalAlign:\"middle\"},b={marginTop:`${s}px`},u={height:`${d}px`};return h(\"div\",{key:\"univariate-above-and-below-ramp-preview\",styles:L},h(\"div\",{class:_.layerBody},l.infos.map((e=>h(\"div\",{class:this.classes(_.layerRow,_.sizeRamp)},h(\"div\",{class:_.symbol,styles:v,bind:e.preview,afterCreate:m}))))),h(\"div\",{styles:b,key:\"color-ramp-preview\"},h(\"div\",{styles:w},h(\"div\",{styles:C},h(\"div\",{class:_.rampContainer,bind:y,afterCreate:m})),h(\"div\",{styles:C},h(\"div\",{class:_.rampLabelsContainer,styles:u},g)))))}_renderLegendForRamp(e,r){const l=e.infos,a=\"opacity-ramp\"===e.type,s=\"heatmap-ramp\"===e.type,i=\"stretch-ramp\"===e.type,t=e.preview,n=a?_.opacityRamp:\"\";t.className=`${_.colorRamp} ${n}`,null!=r&&(t.style.opacity=r.toString());const o=l.map((e=>h(\"div\",{class:e.label?_.rampLabel:null},s?this.messages[e.label]:i?this._getStretchStopLabel(e):e.label))),p={width:`${f}px`},d={height:t.style.height};return h(\"div\",{class:_.layerRow},h(\"div\",{class:_.symbolContainer,styles:p},h(\"div\",{class:_.rampContainer,bind:t,afterCreate:m})),h(\"div\",{class:_.layerInfo},h(\"div\",{class:_.rampLabelsContainer,styles:d},o)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+\": \"+(\"string\"==typeof e.value?e.value:b(e.value,{style:\"decimal\",notation:e.value.toString().indexOf(\"e\")>-1?\"scientific\":\"standard\"})):\"\"}_renderLegendForElementInfo(e,r,l,a){if(e.type)return this._renderLegendForElement(e,r,!0);let s=null;const i=c(r,a);if(e.preview?s=h(\"div\",{class:_.symbol,bind:e.preview,afterCreate:m}):e.src&&(s=this._renderImage(e,r,i)),!s)return null;const t={[_.imageryLayerInfoStretched]:i},n={[_.imageryLayerInfoStretched]:i,[_.sizeRamp]:!i&&l};return h(\"div\",{class:_.layerRow},h(\"div\",{class:this.classes(_.symbolContainer,n)},s),h(\"div\",{class:this.classes(_.layerInfo,t)},d(this.messages,e.label,!1)||\"\"))}_renderImage(e,r,l){const{label:a,src:s,opacity:i}=e,t={[_.imageryLayerStretchedImage]:l,[_.symbol]:!l},n={opacity:`${null!=i?i:r.opacity}`};return h(\"img\",{alt:d(this.messages,a,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(t),styles:n})}};e([r()],R.prototype,\"activeLayerInfos\",void 0),e([r()],R.prototype,\"headingLevel\",void 0),e([r(),v(\"esri/widgets/Legend/t9n/Legend\")],R.prototype,\"messages\",void 0),e([r({readOnly:!0})],R.prototype,\"type\",void 0),R=e([l(\"esri.widgets.Legend.styles.Classic\")],R);var A=R;export default A;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import s from\"../core/Handles.js\";import{on as t,watch as i,init as r}from\"../core/watchUtils.js\";import{aliasOf as o}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/has.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/Logger.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as d}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"./Widget.js\";import c from\"./Legend/LegendViewModel.js\";import p from\"./Legend/styles/Card.js\";import h from\"./Legend/styles/Classic.js\";import\"./support/widgetUtils.js\";import{messageBundle as y}from\"./support/decorators/messageBundle.js\";import{tsx as v}from\"./support/jsxFactory.js\";const g={base:\"esri-legend\",widget:\"esri-widget\",panel:\"esri-widget--panel\",widgetIcon:\"esri-icon-layer-list\"};let f=class extends l{constructor(e,t){super(e,t),this._handles=new s,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=g.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new h,this.view=null,this.viewModel=new c}initialize(){this.own(t(this,\"activeLayerInfos\",\"change\",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),i(this,\"headingLevel\",(e=>{const{style:s}=this;s&&(s.headingLevel=e)})),r(this,\"style\",((e,s)=>{s&&e!==s&&s.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)})))}destroy(){this._handles.destroy(),this._handles=null}castStyle(e){if(e instanceof p||e instanceof h)return e;if(\"string\"==typeof e)return\"card\"===e?new p:new h;if(e&&\"string\"==typeof e.type){const s={...e};delete s.type;return new(\"card\"===e.type?p:h)(s)}return new h}render(){return v(\"div\",{class:this.classes(g.base,g.widget,this.style instanceof h?g.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach((e=>this._renderOnActiveLayerInfoChange(e))),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const s=r(e,\"version\",(()=>this.scheduleRender()));this._handles.add(s,`version_${e.layer.uid}`);const i=t(e,\"children\",\"change\",(()=>{e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}));this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};e([o(\"viewModel.activeLayerInfos\")],f.prototype,\"activeLayerInfos\",void 0),e([o(\"viewModel.basemapLegendVisible\")],f.prototype,\"basemapLegendVisible\",void 0),e([o(\"viewModel.groundLegendVisible\")],f.prototype,\"groundLegendVisible\",void 0),e([a()],f.prototype,\"headingLevel\",void 0),e([o(\"viewModel.keepCacheOnDestroy\")],f.prototype,\"keepCacheOnDestroy\",void 0),e([o(\"viewModel.respectLayerVisibility\")],f.prototype,\"respectLayerVisibility\",void 0),e([a()],f.prototype,\"iconClass\",void 0),e([a({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],f.prototype,\"label\",void 0),e([o(\"viewModel.layerInfos\")],f.prototype,\"layerInfos\",void 0),e([a(),y(\"esri/widgets/Legend/t9n/Legend\")],f.prototype,\"messages\",void 0),e([a()],f.prototype,\"style\",void 0),e([n(\"style\")],f.prototype,\"castStyle\",null),e([o(\"viewModel.view\")],f.prototype,\"view\",void 0),e([a()],f.prototype,\"viewModel\",void 0),f=e([d(\"esri.widgets.Legend\")],f);var m=f;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction e(e,n,i){if(n.flatten((({sublayers:e})=>e)).length!==e.length)return!0;return!!e.some((e=>e.originIdOf(\"minScale\")>i||e.originIdOf(\"maxScale\")>i||e.originIdOf(\"renderer\")>i||e.originIdOf(\"labelingInfo\")>i||e.originIdOf(\"opacity\")>i||e.originIdOf(\"labelsVisible\")>i||e.originIdOf(\"source\")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||\"map-layer\"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"opacity\")>2||e.originIdOf(\"labelsVisible\")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}export{n as isExportDynamic,i as isSublayerOverhaul,e as shouldWriteSublayerStructure};\n"],"sourceRoot":""}