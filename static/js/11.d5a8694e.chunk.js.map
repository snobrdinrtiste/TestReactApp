{"version":3,"sources":["../node_modules/@arcgis/core/views/layers/support/FeatureFilter.js","../node_modules/@arcgis/core/AggregateGraphic.js","../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js","../node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js","../node_modules/@arcgis/core/views/layers/support/FeatureEffect.js","../node_modules/@arcgis/core/views/2d/tiling/TileManager.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/views/layers/support/ClipRect.js","../node_modules/@arcgis/core/views/layers/support/ClipArea.js","../node_modules/@arcgis/core/views/layers/support/Geometry.js","../node_modules/@arcgis/core/views/layers/support/Path.js","../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js","../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js","../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/support/drapedUtils.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"names":["d","m","i","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","u","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","h","e","where","geometry","spatialRelationship","hiddenIds","Set","distance","objectIds","units","timeExtent","enabled","t","this","_set","r","s","n","a","p","c","o","l","forEach","add","type","String","prototype","types","json","read","write","source","reader","target","writer","Array","from","Number","overridePolicy","readOnly","y","arguments","isAggregate","popupTemplate","sourceLayer","featureReduction","popupEnabled","objectId","cloneProperties","Boolean","default","some","globalId","filter","error","map","values","delete","_hasGlobalIds","_queueProcessor","concurrency","process","clear","length","last","push","finally","notifyChange","popLast","_mergeEdits","edits","addedFeatures","deletedFeatures","updatedFeatures","addOrModified","removed","f","isArray","_startupResolver","isReady","_controller","addResolvingPromise","_startWorker","signal","abort","_connection","close","client","tileRenderer","closed","when","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","promise","query","params","name","value","strategy","_tiles","Map","buffer","acquireTile","releaseTile","tileInfoView","_releaseTile","getTileCoverage","state","spans","lodInfo","level","row","colFrom","colTo","getId","normalizeCol","getWorldForColumn","_getOrAcquireTile","visible","key","_addPlaceholders","has","id","pool","release","hasMissingTiles","size","added","set","get","_addPlaceholderChildren","Math","abs","_addPlaceholderParent","_getTile","_addPlaceholderChild","hasData","contains","getParentKey","patchCount","includedEffect","excludedEffect","excludedLabelsVisible","clone","I","getLogger","R","_updatingRequiredFieldsPromise","effect","layer","requiredFields","view","_handleRequiredFieldsChange","fieldsIndex","outFields","Error","returnGeometry","outSpatialReference","spatialReference","createQuery","x","intersection","b","_updateRequiredFields","then","objectIdField","renderer","collectRequiredFields","timeInfo","F","startField","endField","floorInfo","floorField","w","subtypeField","sublayers","Promise","all","displayField","sort","clientGraphics","q","createPopupQuery","_loadArcadeModules","arcadeUtils","hasGeometryOperations","g","attributes","queryFeatures","concat","features","catch","geometryType","j","returnZ","returnM","isEmpty","E","v","K","W","X","Y","_pipelineIsUpdating","_commandsQueue","P","_doEdit","_doRefresh","_doUpdate","_visibilityOverrides","_effect","_highlightIds","_lastPixelBuffer","_updateHighlight","_proxy","setHighlight","keys","_uploadsLocked","_needsClusterSizeUpdate","effectLists","included","z","excluded","_updateClusterSizeTask","remove","destroy","_initProxy","_initServiceOptions","handles","on","valueRanges","isTable","_createClientOptions","V","_createServiceOptions","items","suspended","labelingInfo","labelsVisible","enable","_serviceOptions","availableFields","floors","definitionExpression","gdbVersion","historicMoment","getTime","JSON","stringify","geometryDefinition","clips","reduce","sublayerHash","filterHash","effectHash","streamFilter","clipsHash","hasEffects","getObjectId","isCollection","getAttribute","toArray","_addHighlight","_removeHighlight","_hitTest","queryStatistics","valueExpression","viewInfoParams","viewingMode","scale","querySummaryStatistics","_cleanUpQuery","queryFeaturesJSON","S","fromJSON","_setLayersForFeature","queryObjectIds","queryFeatureCount","queryExtent","count","extent","G","_update","_tileStrategy","update","updateTiles","requestUpdate","timeline","record","title","N","_acquireTile","featuresTilingScheme","_edit","container","removeAllChildren","uninstall","_tileRendererHash","popup","defaultPopupTemplateEnabled","validateFetchPopupFeatures","fetchClientPopupFeatures","_fetchServicePopupFeatures","event","createFetchPopupFeaturesQueryGeometry","Q","updating","console","log","setUpdating","emitEvent","emit","path","capabilities","operations","supportsEditing","mode","featureCount","fullExtent","width","height","warn","fields","L","customParameters","token","apiKey","globalIdField","getFeatureDefinition","openPorts","parsedUrl","dynamicDataSource","_detectQueryMode","maxRecordCount","tileMaxRecordCount","_validateEdit","includes","destroyed","_hasRequiredSupport","_getEffectiveRenderer","_createSchemaConfig","C","_createConfiguration","max","schema","pixelBuffer","_createTileRendererHash","_initTileRenderer","effects","onConfigUpdate","tileKeys","startup","hasHighlight","_onceTilesUpdated","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","watch","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","T","field","indexOf","O","_aggregateValueRanges","_createUpdateClusterSizeTask","aggregateFields","once","layerView","install","getAttributeHash","_addFloorFilterClause","$","viewAllLevelIds","replace","join","RegExp","trim","_injectOverrides","A","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","_","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","hitTest","getFeature","_createHittestResult","getAggregate","referenceId","H","k","U","J","M","Z","parent","declaredClass","canResume","getSuspendInfo","legendEnabled","updatingHandles","isUpdating","_override","_clearOverride","suspendInfo","ready","viewNotReady","loaded","layerNotLoaded","layerInvisible","EventedMixin","left","right","top","bottom","_get","base","typeMap","polygon","ofType","rect","moving","attached","lastUpdateId","updateRequested","fadeTransitionEnabled","opacity","blendMode","whenLayerView","attach","detach","minScale","maxScale","isFulfilled","isResolved","isVisibleAtScale","minDataValue","maxDataValue","minSize","maxSize","SIZE_MINMAX_VALUE","expression","stops","SIZE_SCALE_STOPS","levels","SIZE_FIELD_STOPS","valueUnit","SIZE_UNIT_VALUE","NONE","xoffset","yoffset","floor","pointerType","symbol","uniqueValueInfos","classBreakInfos","resolution","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","keyField","defaultPopupTemplate"],"mappings":"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","file":"static/js/11.d5a8694e.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../../geometry.js\";import r from\"../../../TimeExtent.js\";import{JSONMap as i}from\"../../../core/jsonMap.js\";import{JSONSupport as s}from\"../../../core/JSONSupport.js\";import{clone as o}from\"../../../core/lang.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../../core/accessorSupport/decorators/writer.js\";import{fromJSON as l}from\"../../../geometry/support/jsonUtils.js\";import c from\"../../../rest/support/Query.js\";var d;const m=new i({esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"envelope-intersects\",esriSpatialRelIndexIntersects:\"index-intersects\",esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:\"relation\"}),u=new i({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"});let h=d=class extends s{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship=\"intersects\",this.hiddenIds=new Set,this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null,this.enabled=!1}writeWhere(e,t){t.where=e||\"1=1\"}enable(){this._set(\"enabled\",!0)}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:a,distance:p}=this;return new c({geometry:o(r),objectIds:o(n),spatialRelationship:i,timeExtent:o(s),where:t,units:a,distance:p,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,hiddenIds:i,timeExtent:s,objectIds:n,units:a,distance:p}=this,l=new Set;return i.forEach((e=>l.add(e))),new d({geometry:o(t),hiddenIds:l,objectIds:o(n),spatialRelationship:r,timeExtent:o(s),where:e,units:a,distance:p})}};e([n({type:String})],h.prototype,\"where\",void 0),e([p(\"where\")],h.prototype,\"writeWhere\",null),e([n({types:t,json:{read:l,write:!0}})],h.prototype,\"geometry\",void 0),e([n({type:String,json:{read:{source:\"spatialRel\",reader:m.read},write:{target:\"spatialRel\",writer:m.write}}})],h.prototype,\"spatialRelationship\",void 0),e([n({json:{write:(e,t,r)=>t[r]=Array.from(e),read:e=>new Set(e)}})],h.prototype,\"hiddenIds\",void 0),e([n({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],h.prototype,\"distance\",void 0),e([n({type:[Number],json:{write:!0}})],h.prototype,\"objectIds\",void 0),e([n({type:String,json:{read:u.read,write:{writer:u.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],h.prototype,\"units\",void 0),e([n({type:r,json:{write:!0}})],h.prototype,\"timeExtent\",void 0),e([n({readOnly:!0})],h.prototype,\"enabled\",void 0),h=d=e([a(\"esri.views.layers.support.FeatureFilter\")],h);var y=h;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"./chunks/tslib.es6.js\";import r from\"./Graphic.js\";import{property as t}from\"./core/accessorSupport/decorators/property.js\";import\"./core/has.js\";import\"./core/accessorSupport/ensureType.js\";import\"./core/Logger.js\";import{subclass as o}from\"./core/accessorSupport/decorators/subclass.js\";var p;let s=p=class extends r{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer&&this.sourceLayer.featureReduction;return r&&\"popupTemplate\"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.objectId}clone(){return new p({objectId:this.objectId,...this.cloneProperties()})}};e([t({type:Boolean})],s.prototype,\"isAggregate\",void 0),e([t({type:Number,json:{read:!0}})],s.prototype,\"objectId\",void 0),s=p=e([o(\"esri.AggregateGraphic\")],s);var c=s;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nasync function e(e,a){if(!e)return null;switch(e.type){case\"class-breaks\":case\"simple\":case\"unique-value\":case\"dot-density\":case\"dictionary\":return new((await import(\"./tileRenderers/SymbolTileRenderer.js\")).default)(a);case\"heatmap\":return new((await import(\"./tileRenderers/HeatmapTileRenderer.js\")).default)(a)}}export{e as createOrReuseTileRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{QueueProcessor as o}from\"../../../support/QueueProcessor.js\";function d(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>{var r;return null!=(r=e.objectId)?r:e.globalId}))}function a(e,r){const s=new Set(e);for(const t of r.values())s.add(t);return s}function i(e,r){const s=new Set(e);for(const t of r.values())s.delete(t);return s}let u=class extends r{constructor(e){super(),this._hasGlobalIds=!1,this._queueProcessor=new o({concurrency:1,process:e.process})}destroy(){this._queueProcessor.clear()}get updating(){return this._queueProcessor.length>0}push(e){const r=this._queueProcessor,s=r.last();switch(e.type){case\"update\":case\"refresh\":if((null==s?void 0:s.type)===e.type)return;r.push(e).finally((()=>this.notifyChange(\"updating\")));break;case\"edit\":{const t=\"processed-edit\"===(null==s?void 0:s.type)?s:null;t&&r.popLast();const o=this._mergeEdits(t,e);for(const e of o)r.push(e).finally((()=>this.notifyChange(\"updating\")));break}}this.notifyChange(\"updating\")}_mergeEdits(e,r){var s,t;const{addedFeatures:o,deletedFeatures:u,updatedFeatures:c}=r.edits;if(this._hasGlobalIds=this._hasGlobalIds||d(o)||d(c)||d(u),this._hasGlobalIds){return[e,{type:\"processed-edit\",edits:{addOrModified:[...o,...c],removed:u}}]}const p=new Set(n(null!=(s=null==e?void 0:e.edits.addOrModified)?s:[])),l=new Set(n(null!=(t=null==e?void 0:e.edits.removed)?t:[])),f=new Set([...n(o),...n(c)]),h=new Set(n(u));return[{type:\"processed-edit\",edits:{addOrModified:Array.from(a(i(p,h),f)).map((e=>({objectId:e}))),removed:Array.from(a(i(l,f),h)).map((e=>({objectId:e})))}}]}};e([s({readOnly:!0})],u.prototype,\"updating\",null),u=e([t(\"esri.views.2d.layers.support.FeatureCommandQueue\")],u);var c=u;export default c;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as e}from\"../../../../core/Promise.js\";import{createResolver as r,createAbortController as s,ignoreAbortErrors as o,throwIfNotAbortError as i}from\"../../../../core/promiseUtils.js\";import{open as n}from\"../../../../core/workers/workers.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";function l(t){return Array.isArray(t)}let u=class extends e{constructor(t){super(t),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=s(),this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(t){this.client.tileRenderer=t}get closed(){return this._connection.closed}async startup(t,e,r,s){await this.when();const o=this._controller.signal,i=l(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:e,tileInfo:t.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(t){return await this._startupResolver.promise,o(this._connection.invoke(\"updateTiles\",t))}async update(t){const e={config:t};return await this._startupResolver.promise,this._connection.invoke(\"update\",e)}async applyUpdate(t){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",t)}async setHighlight(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.setHighlight\",t))}async refresh(){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.refresh\"))}async querySummaryStatistics(t,e,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:t.toJSON(),params:e},r)}async queryFeatures(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",t.toJSON(),e)}async queryObjectIds(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",t.toJSON(),e)}async queryFeatureCount(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",t.toJSON(),e)}async queryExtent(t,e){return this._connection.invoke(\"controller.queryExtent\",t.toJSON(),e)}async queryLatestObservations(t,e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",t.toJSON(),e)}async queryStatistics(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",t)}async getObjectId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",t)}async getDisplayId(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",t)}async getFeature(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeature\",t)}async getAggregate(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregate\",t)}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(t){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",t)}async onEdits(t){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.onEdits\",t))}async enableEvent(t,e){return await this._startupResolver.promise,o(this._connection.invoke(\"controller.enableEvent\",{name:t,value:e}))}async _startWorker(t){try{this._connection=await n(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:t})}catch(e){i(e)}}};t([a()],u.prototype,\"isReady\",void 0),t([a()],u.prototype,\"client\",void 0),t([a()],u.prototype,\"tileRenderer\",null),u=t([c(\"esri.views.2d.layers.support.FeatureLayerProxy\")],u);var p=u;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./FeatureFilter.js\";var i;let c=i=class extends t{constructor(){super(...arguments),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}clone(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e([r({type:s,json:{write:!0}})],c.prototype,\"filter\",void 0),e([r({json:{write:!0}})],c.prototype,\"includedEffect\",void 0),e([r({json:{write:!0}})],c.prototype,\"excludedEffect\",void 0),e([r({type:Boolean,json:{write:!0}})],c.prototype,\"excludedLabelsVisible\",void 0),c=i=e([o(\"esri.views.layers.support.FeatureEffect\")],c);var l=c;export default l;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const l=1e-6;class s{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(e){const l=this.tileInfoView.getTileCoverage(e.state,this.buffer,\"closest\"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:i,colFrom:c,colTo:f}of s)for(let e=c;e<=f;e++){const l=t.getId(a,i,r.normalizeCol(e),r.getWorldForColumn(e)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),i.pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,i){if(!this._tiles.has(i)){const l=this.acquireTile(new t(i));e.push(i),this._tiles.set(i,l),l.visible=!1}return this._tiles.get(i)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const t=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-t)<l)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(i,t){let l=t.getParentKey(),s=0,r=null;for(;e(l);){if(i.has(l.id))return!0;const e=this._getTile(l.id);if(null!=e&&e.isReady)return e.visible=!0,i.add(e.key.id),!0;null!=e&&e.hasData&&e.patchCount>s&&(s=e.patchCount,r=e),l=l.getParentKey()}return!!r&&(r.visible=!0,i.add(r.key.id),!0)}}export{s as TileManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as p}from\"../../layers/support/commonProperties.js\";import{fixFields as d,unpackFieldNames as m,collectLabelingFields as c,collectElevationFields as f,collectFilterFields as y,collectFeatureReductionFields as h,collectFields as F,collectField as w,featureHasFields as g}from\"../../layers/support/fieldUtils.js\";import x from\"../../rest/support/Query.js\";import{loadArcade as b}from\"../../support/arcadeOnDemand.js\";import E from\"./support/FeatureEffect.js\";import v from\"./support/FeatureFilter.js\";import{getFetchPopupTemplate as q,getRequiredFields as j}from\"./support/popupUtils.js\";const I=r.getLogger(\"esri.views.layers.FeatureLayerView\"),R=r=>{let R=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.effect=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"effect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?d(t,[...m(t,e.outFields),...r]):d(t,r)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){I.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new x(e);return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\"))return b()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,l=t.featureReduction,a=new Set,u=await o([n?n.collectRequiredFields(a,r):null,c(a,t),e?f(a,t):null,i(this.filter)?y(a,t,this.filter):null,this.effect?y(a,t,this.effect.filter):null,l?h(a,t,l):null]);if(t.timeInfo&&this.timeExtent&&F(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&F(a,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){w(a,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(a,r),c(a,e)])}));await o(e)}for(const i of u)i.error&&I.error(i.error);w(a,r,s),e&&\"displayField\"in t&&t.displayField&&w(a,r,t.displayField);const p=Array.from(a).sort();this._set(\"requiredFields\",p)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return Promise.resolve([]);const r=[],s=[],o=await this.createPopupQuery(e);for(const n of t){const{layer:t}=n;if(!(\"popupEnabled\"in t))continue;const l=m(this.layer.fieldsIndex,o.outFields),a=q(t,e);if(!i(a))continue;const u=await this._loadArcadeModules(a);u&&u.arcadeUtils.hasGeometryOperations(a)||!g(l,n)?s.push(n):r.push(n)}return\"stream\"===this.layer.type||0===s.length?Promise.resolve(r):(o.objectIds=s.map((e=>e.attributes[this.layer.objectIdField])),this.layer.queryFeatures(o).then((e=>r.concat(e.features))).catch((()=>s)))}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let s=!1;const o=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const n of o){if(!(\"popupEnabled\"in n))continue;const t=q(n,e);if(!i(t))continue;const o=await this._loadArcadeModules(t),l=o&&o.arcadeUtils.hasGeometryOperations(t);s=!(\"point\"!==this.layer.geometryType&&!l);const a=await j(this.layer,t);for(const e of a)r.add(e)}return t.returnGeometry=s,t.returnZ=s,t.returnM=s,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([a()],R.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([a({readOnly:!0})],R.prototype,\"availableFields\",null),e([a({type:E})],R.prototype,\"effect\",void 0),e([a({type:v})],R.prototype,\"filter\",void 0),e([a(p)],R.prototype,\"timeExtent\",void 0),e([a()],R.prototype,\"layer\",void 0),e([a({type:Number})],R.prototype,\"maximumNumberOfFeatures\",null),e([a({readOnly:!0,type:Boolean})],R.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([a({readOnly:!0})],R.prototype,\"requiredFields\",void 0),e([a()],R.prototype,\"suspended\",void 0),e([a()],R.prototype,\"view\",void 0),R=e([u(\"esri.views.layers.FeatureLayerView\")],R),R};export default R;export{R as FeatureLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import i from\"../../../Graphic.js\";import{flatten as r}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import a from\"../../../core/Error.js\";import n from\"../../../core/has.js\";import{clone as l}from\"../../../core/lang.js\";import o from\"../../../core/Logger.js\";import{andThen as h,unwrapOr as u,isSome as d,isNone as p}from\"../../../core/maybe.js\";import{debounce as c,eachAlwaysValues as f,isAbortError as y,after as g}from\"../../../core/promiseUtils.js\";import{init as m,whenFalseOnce as _}from\"../../../core/watchUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as R}from\"../../../layers/support/arcgisLayerUrl.js\";import{calculateTolerance as x}from\"../../../renderers/support/clickToleranceUtils.js\";import S from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import{MAX_FILTERS as F}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as U}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as E}from\"./features/tileRenderers.js\";import{computePxBuffer as C}from\"./features/support/pixelBuffering.js\";import{findSizeVV as T,createClusterCountSizeVariable as O,isClusterCompatibleRenderer as j,createClusterRenderer as q}from\"./support/clusterUtils.js\";import P from\"./support/FeatureCommandQueue.js\";import V from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as N}from\"../tiling/TileManager.js\";import{FeatureLayerView as H}from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import{RefreshableLayerView as k}from\"../../layers/RefreshableLayerView.js\";import z from\"../../layers/effects/EffectList.js\";import $ from\"../../layers/support/FeatureFilter.js\";import M from\"../../layers/support/FeatureEffect.js\";import{createQueryGeometry as Q}from\"../../support/drapedUtils.js\";import A from\"../../webgl/capabilities.js\";import G from\"../../../geometry/Extent.js\";const D=2147483648,B=1,K=e=>(e&D)>>>31===B;function W(e){return e&&\"openPorts\"in e}const X=o.getLogger(\"esri.views.2d.layers.FeatureLayerView2D\");let Y=class extends(H(k(U(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new P({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh();case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._effect=null,this._highlightIds=new Map,this._lastPixelBuffer=0,this._updateHighlight=c((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.filter=null,this.effectLists={included:new z,excluded:new z}}destroy(){var e,t;h(this._updateClusterSizeTask,(e=>e.remove())),null==(e=this._proxy)||e.destroy(),null==(t=this.tileRenderer)||t.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.handles.add([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),m(this,\"effect\",(e=>{this.effectLists.included.effect=null==e?void 0:e.includedEffect})),m(this,\"effect\",(e=>{this.effectLists.excluded.effect=null==e?void 0:e.excludedEffect}))])}async _initProxy(){if(\"isTable\"in this.layer&&this.layer.isTable)throw new a(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});this._proxy&&this._proxy.destroy();const e=this._createClientOptions();return this._set(\"_proxy\",new V({client:e})),this._proxy.when()}async _initServiceOptions(){this._set(\"_serviceOptions\",await this._createServiceOptions())}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get effect(){return u(this._effect,null)}set effect(e){const t=this._effect;d(t)&&d(t.filter)&&t.filter.enabled&&d(e)&&d(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange(\"effect\")}get effects(){return this.effect&&[this.effect]||[]}get queryMode(){return this._serviceOptions.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,i=this.view.floors,{definitionExpression:r}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"feature\"===t.type?t.gdbVersion:void 0,l=\"feature\"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,{timeExtent:o}=this,h=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,u=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON(),c=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\");return JSON.stringify({sublayerHash:c,filterHash:d(this.filter)&&this.filter.toJSON(),effectHash:d(this.effect)&&this.effect.toJSON(),streamFilter:h,gdbVersion:n,definitionExpression:r,historicMoment:l,availableFields:e,renderer:a,labelingInfo:s,timeExtent:o,floors:i,clipsHash:u,featureReduction:p})}get hasEffects(){return this.effectLists.included.hasEffects||this.effectLists.excluded.hasEffects}highlight(e){let t;return e instanceof i?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:s.isCollection(e)?t=e.map((e=>e&&e.getAttribute(this.layer.objectIdField))).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e&&e.getAttribute(this.layer.objectIdField)))),t&&t.length?(t=t.filter((e=>null!=e)),this._addHighlight(t),{remove:()=>this._removeHighlight(t)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}hitTest(e,t){return this._hitTest(e,t)}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,i){const r={...t};var s;t.valueExpression&&(r.viewInfoParams={viewingMode:\"map\",scale:this.view.scale,spatialReference:null==(s=this.view.spatialReference)?void 0:s.toJSON()});return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),r,i)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=S.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:G.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:i,removed:r}=this._tileStrategy.update(e);(i.length||r.length)&&this._proxy.updateTiles({added:i,removed:r}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new N({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(m(this,\"renderingConfigHash\",(()=>this._update())),\"attach\"),\"stream\"!==this.layer.type&&this.handles.add(this.layer.on(\"edits\",(e=>this._edit(e))),\"attach\")}detach(){this.container.removeAllChildren(),this.handles.remove(\"attach\"),this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}async fetchPopupFeatures(e,i){if(d(i)&&i.clientGraphics.length){const e=i.clientGraphics[0];if(e instanceof t)return[e];i.clientGraphics=i.clientGraphics.filter((e=>{const{layer:t}=e,i=\"popupEnabled\"in t&&t.popupEnabled,r=\"popupTemplate\"in t&&t.popupTemplate,s=this.view.popup.defaultPopupTemplateEnabled;return i&&(r||s)}))}const s=this.validateFetchPopupFeatures(i);if(s)throw s;if(d(i)&&0===i.clientGraphics.length)return[];const a=this.fetchClientPopupFeatures(i);if(!e)return a;const n=this._fetchServicePopupFeatures(e,i);return f([a,n]).then(r)}async _fetchServicePopupFeatures(e,t){if(\"stream\"===this.layer.type||\"ogc-feature\"===this.layer.type)return[];const i=await this.createPopupQuery(t),{layer:r}=this,s=\"renderer\"in r&&r.renderer,a=d(t)?t.event:null,n=x({renderer:s,event:a});i.geometry=this.createFetchPopupFeaturesQueryGeometry(e,n);const l=new Set,{objectIdField:o}=r,h=d(t)?t.clientGraphics:null;if(h)for(const u of h)l.add(u.attributes[o]);return r.queryFeatures(i).then((e=>e.features.filter((e=>!l.has(e.attributes[o])))))}createFetchPopupFeaturesQueryGeometry(e,t){return Q(e,t,this.view)}isUpdating(){var e;const t=\"renderer\"in this.layer&&null!=this.layer.renderer,i=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,s=!this._proxy||!this._proxy.isReady,a=this._pipelineIsUpdating,l=null===this.tileRenderer||(null==(e=this.tileRenderer)?void 0:e.updating),o=t&&(i||r||s||a||l);return n(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${o}\\n  -> hasRenderer ${t}\\n  -> hasPendingCommand ${i}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${s}\\n  -> updatingPipeline ${a}\\n  -> updatingTileRenderer ${l}\\n`),o}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){if(\"path\"in e&&R(e.path)&&(\"feature\"===this.layer.type||\"subtype-group\"===this.layer.type)&&\"point\"===this.layer.geometryType&&!this.layer.capabilities.operations.supportsEditing&&n(\"featurelayer-snapshot-enabled\"))try{const e=await this.layer.queryFeatureCount();if(e<=n(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=n(\"featurelayer-snapshot-point-max-threshold\"),i=n(\"featurelayer-snapshot-point-coverage\"),r=this.view.extent,s=this.layer.fullExtent,a=null==s?void 0:s.clone().intersection(r),l=(null==a?void 0:a.width)*(null==a?void 0:a.height),o=(null==s?void 0:s.width)*(null==s?void 0:s.height),h=0===o?0:l/o;if(e<=t&&h>=i)return{mode:\"snapshot\",featureCount:e}}catch(t){X.warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:t})}return{mode:\"on-demand\"}}async _createServiceOptions(){var e;const t=this.layer;if(\"stream\"===t.type)return null;const{capabilities:i,objectIdField:r}=t,s=t.fields.map((e=>e.toJSON())),a=t.fullExtent&&t.fullExtent.toJSON(),n=L(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,h=t.spatialReference?t.spatialReference.toJSON():null,u={...\"customParameters\"in t?t.customParameters:void 0,token:\"apiKey\"in t?t.apiKey:void 0},d=\"feature\"===t.type?t.globalIdField:null;let p;\"ogc-feature\"===t.type?p=t.source.getFeatureDefinition():W(t.source)?p=await t.source.openPorts():t.parsedUrl&&(p=l(t.parsedUrl),\"dynamicDataSource\"in t&&t.dynamicDataSource&&(p.query={layer:JSON.stringify({source:t.dynamicDataSource})}));const c=null!=(e=\"subtypeField\"in this.layer&&this.layer.subtypeField)?e:null,{mode:f,featureCount:y}=await this._detectQueryMode(p);return{type:f,subtypeField:c,featureCount:y,globalIdField:d,maxRecordCount:i.query.maxRecordCount,tileMaxRecordCount:i.query.tileMaxRecordCount,capabilities:i,fields:s,fullExtent:a,geometryType:n,objectIdField:r,source:p,timeInfo:o,spatialReference:h,customParameters:u}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=w.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this._validateEdit(e))return this._commandsQueue.push({type:\"edit\",edits:e})}async doRefresh(){return this._commandsQueue.push({type:\"refresh\"})}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,i=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),r=t&&this.availableFields.includes(t);return i&&!r?(X.error(new a(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{effect:t,filter:i}=this;await this._updateRequiredFields();const{renderer:r}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",r);const s=this._createSchemaConfig(),a=L(this.layer.geometryType),n=await C(r,a,this.layer.featureReduction),l=this._createConfiguration(s,i,t);this._lastPixelBuffer=0===n?0:Math.max(n,this._lastPixelBuffer),l.schema.source.pixelBuffer=this._lastPixelBuffer;const o=this._createTileRendererHash(r);if(o!==this._tileRendererHash){await this._initTileRenderer(r);const e=this._serviceOptions;this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r);const t={added:this._tileStrategy.tileKeys(),removed:[]},i=this.layer;\"stream\"!==i.type&&W(i.source)&&(e.source=await i.source.openPorts()),await this._proxy.startup(this.view.featuresTilingScheme,l,e,t),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(r)}else{const t=await this._proxy.update(l);(t.mesh||t.targets.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||X.error(e)}(t.mesh||t.targets.aggregate)&&this._unlockGPUUploads(),this.effects.forEach((e=>d(e)&&d(e.filter)&&e.filter.enable())),this.tileRenderer.onConfigUpdate(r),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=o,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(){this._lockGPUUploads();try{await this._proxy.refresh()}catch(e){y(e),0}this._unlockGPUUploads()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return this.watch(\"_aggregateValueRanges\",(async i=>{this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,i){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const r=T(e.visualVariables);if(d(r)&&\"cluster_count\"===r.field){const s=e.visualVariables.indexOf(r);e.visualVariables[s]=O(t,i);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=\"renderer\"in this.layer&&this.layer.renderer,t=this.layer.featureReduction;if(d(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&\"cluster\"===t.type&&j(e)){const i=t,r=[],s=q(r,e,i,this._aggregateValueRanges);return h(this._updateClusterSizeTask,(e=>e.remove())),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,i),{renderer:s,aggregateFields:r,featureReduction:t}}return{renderer:e,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e){const t=await E(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this.destroyed?null:(this._proxy.tileRenderer=t,this._set(\"tileRenderer\",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${\"heatmap\"===e.type?\"heatmap\":\"symbol\"}.${\"dot-density\"===e.type}`}_createFeatureDataHash(e,t,i){const r=e.getAttributeHash(),s=JSON.stringify(t),a=d(i)&&JSON.stringify(i.filter),n=JSON.stringify(this.timeExtent);let l=\"\";return this._visibilityOverrides.forEach((e=>l+=e)),`${r}.${s}.${a}.${n}.${l}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=d(e)?e.timeExtent:null,i=d(this.timeExtent)&&d(t)?this.timeExtent.intersection(t):this.timeExtent||t;let r=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=d(e)&&e.where;r=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!i&&!s)return e;const a=d(e)&&e.clone()||new $;return a.hiddenIds=this._visibilityOverrides,a.timeExtent=i,r&&(a.where=r),a}_addFloorFilterClause(e){const t=this.layer;let i=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){var r;let e=this.view.floors;if(!e||!e.length)return i;null!=(r=t.floorInfo.viewAllLevelIds)&&r.length&&(e=t.floorInfo.viewAllLevelIds);const s=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));s.push(\"''\");const a=t.floorInfo.floorField;let n=\"(\"+a+\" IN ({ids}) OR \"+a+\" IS NULL)\";if(n=n.replace(\"{ids}\",s.join(\", \")),d(i)&&i.includes(a)){let e=new RegExp(\"AND \\\\(\"+a+\".*NULL\\\\)\",\"g\");i=i.replace(e,\"\"),e=new RegExp(\"\\\\(\"+a+\".*NULL\\\\)\",\"g\"),i=i.replace(e,\"\"),i=i.replace(/\\s+/g,\" \").trim()}i=\"\"!==i?\"(\"+i+\") AND \"+n:n}return\"\"!==i?i:null}_createConfiguration(e,t,i){const r=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion:void 0,a=new Array(F),n=this._injectOverrides(t);a[0]=d(n)?n.toJSON():null,a[1]=d(i)&&i.filter?i.filter.toJSON():null;const l=I(e);if(p(l))return null;const o=A();return{definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,gdbVersion:s,historicMoment:r,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:l,supportsTextureFloat:o.supportsTextureFloat,maxTextureSize:o.maxTextureSize}}_hasRequiredSupport(e){var t;return!(\"renderer\"in e&&\"dot-density\"===(null==(t=e.renderer)?void 0:t.type)&&!A().supportsTextureFloat)||(X.error(new a(\"webgl-missing-extension\",\"Missing WebGL extension OES_Texture_Float which is required for DotDensity\")),!1)}_onceTilesUpdated(){return this.requestUpdate(),_(this,\"_pipelineIsUpdating\",!1)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=\"feature\"===this.layer.type?this.layer.historicMoment:null,t=\"feature\"===this.layer.type?this.layer.gdbVersion:null;return{renderer:\"renderer\"in this.layer&&this.layer.renderer,spatialReference:this.layer.spatialReference,timeExtent:this.layer.timeExtent,definitionExpression:this.layer.definitionExpression,featureReduction:this.layer.featureReduction,fields:this.layer.fields,geometryType:this.layer.geometryType,historicMoment:e,labelsVisible:\"labelsVisible\"in this.layer&&this.layer.labelsVisible,labelingInfo:\"labelingInfo\"in this.layer&&this.layer.labelingInfo,availableFields:this.availableFields,effect:this.effect,filter:this.filter,gdbVersion:t,pixelBuffer:0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||X.error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createHittestResult(e){return this._setLayersForFeature(e),d(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e}async _hitTest(e,r){if(this.suspended||!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(e,r);if(0===s.length)return await g(1),null;const a=s[0];if(!K(a)){const e=await this._proxy.getFeature(a);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}const n=await this._proxy.getAggregate(a);if(p(n))return null;if(d(n.referenceId)){const e=await this._proxy.getFeature(n.referenceId);return h(e,(e=>this._createHittestResult(i.fromJSON(e))))}return this._createHittestResult(t.fromJSON(n))}};e([v()],Y.prototype,\"_serviceOptions\",void 0),e([v()],Y.prototype,\"_proxy\",void 0),e([v()],Y.prototype,\"_pipelineIsUpdating\",void 0),e([v()],Y.prototype,\"_effectiveRenderer\",void 0),e([v()],Y.prototype,\"_aggregateValueRanges\",void 0),e([v()],Y.prototype,\"_commandsQueue\",void 0),e([v()],Y.prototype,\"labelsVisible\",null),e([v({type:$})],Y.prototype,\"filter\",void 0),e([v({type:M})],Y.prototype,\"effect\",null),e([v({readOnly:!0})],Y.prototype,\"effects\",null),e([v({readOnly:!0})],Y.prototype,\"queryMode\",null),e([v()],Y.prototype,\"renderingConfigHash\",null),e([v()],Y.prototype,\"tileRenderer\",void 0),e([v()],Y.prototype,\"updating\",void 0),Y=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],Y);var Z=Y;export default Z;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as i}from\"../../core/Identifiable.js\";import o from\"../../core/Logger.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(s(i(n(r.EventedMixin(t))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer&&this.layer.title||\"no title\";throw o.getLogger(this.declaredClass).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e),e}}))}get fullOpacity(){const e=e=>null==e?1:e;return e(this.get(\"layer.opacity\"))*e(this.get(\"parent.fullOpacity\"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.get(\"layer.visible\")}set visible(e){void 0!==e?this._override(\"visible\",e):this._clearOverride(\"visible\")}canResume(){return!this.get(\"parent.suspended\")&&this.get(\"view.ready\")&&this.get(\"layer.loaded\")&&this.visible||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l()],p.prototype,\"fullOpacity\",null),e([l()],p.prototype,\"layer\",void 0),e([l()],p.prototype,\"parent\",void 0),e([l({readOnly:!0})],p.prototype,\"suspended\",null),e([l({readOnly:!0})],p.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],p.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],p.prototype,\"updating\",null),e([l({readOnly:!0})],p.prototype,\"updatingProgress\",null),e([l()],p.prototype,\"visible\",null),p=e([a(\"esri.views.layers.LayerView\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";var s;let i=s=class extends e{constructor(){super(...arguments),this.type=\"rect\",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get(\"version\")||0)+1}};t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"left\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"right\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"top\",void 0),t([r({type:[Number,String],json:{write:!0}})],i.prototype,\"bottom\",void 0),t([r({readOnly:!0})],i.prototype,\"version\",null),i=s=t([o(\"esri.views.layers.support.ClipRect\")],i);var p=i;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../../core/JSONSupport.js\";import\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";let e=class extends o{};e=r([s(\"esri.views.layers.support.ClipArea\")],e);var p=e;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../geometry/Geometry.js\";import{fromJSON as s}from\"../../../geometry/support/jsonUtils.js\";import p from\"./ClipArea.js\";import m from\"../../../geometry/Extent.js\";import i from\"../../../geometry/Polygon.js\";var y;const n={base:t,key:\"type\",typeMap:{extent:m,polygon:i}};let c=y=class extends p{constructor(){super(...arguments),this.type=\"geometry\",this.geometry=null}get version(){return(this._get(\"version\")||0)+1}clone(){return new y({geometry:this.geometry.clone()})}};e([r({types:n,json:{read:s,write:!0}})],c.prototype,\"geometry\",void 0),e([r({readOnly:!0})],c.prototype,\"version\",null),c=y=e([o(\"esri.views.layers.support.Geometry\")],c);var a=c;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import e from\"./ClipArea.js\";let t=class extends e{constructor(){super(...arguments),this.type=\"path\",this.path=[]}get version(){return(this._get(\"version\")||0)+1}};r([o({type:[[[Number]]],json:{write:!0}})],t.prototype,\"path\",void 0),r([o({readOnly:!0})],t.prototype,\"version\",null),t=r([s(\"esri.views.layers.support.Path\")],t);var p=t;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import{referenceSetter as s}from\"../../../core/collectionUtils.js\";import{init as i}from\"../../../core/watchUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{Container as a}from\"../engine/Container.js\";import p from\"../../layers/support/ClipArea.js\";import h from\"../../layers/support/ClipRect.js\";import n from\"../../layers/support/Geometry.js\";import d from\"../../layers/support/Path.js\";const c=e.ofType({key:\"type\",base:p,typeMap:{rect:h,path:d,geometry:n}}),l=e=>{let p=class extends e{constructor(){super(...arguments),this.clips=new c,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([i(this,\"suspended\",(t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),!0),i(this,[\"layer.opacity\",\"container\"],(()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)}),!0),i(this,[\"layer.blendMode\"],(t=>{this.container&&(this.container.blendMode=t)}),!0),i(this,[\"layer.effect\"],(t=>{this.container&&(this.container.effect=t)}),!0),this.clips.on(\"change\",(()=>{this.container.clips=this.clips,this.notifyChange(\"clips\")}))]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove(\"initialize\"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const s=this.layer,i=s.minScale,r=s.maxScale;if(null!=i&&null!=r){let s=!i,o=!r;!s&&t<=i&&(s=!0),!o&&t>=r&&(o=!0),e=s&&o}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set(\"updateParameters\",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return t([r({type:c,set(t){const e=s(t,this._get(\"clips\"),c);this._set(\"clips\",e)}})],p.prototype,\"clips\",void 0),t([r()],p.prototype,\"moving\",void 0),t([r()],p.prototype,\"attached\",void 0),t([r()],p.prototype,\"container\",void 0),t([r()],p.prototype,\"suspended\",void 0),t([r({readOnly:!0})],p.prototype,\"updateParameters\",void 0),t([r()],p.prototype,\"updateRequested\",void 0),t([r()],p.prototype,\"updating\",null),t([r()],p.prototype,\"view\",void 0),p=t([o(\"esri.views.2d.layers.LayerView2D\")],p),p};export{l as LayerView2DMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{WGLVVFlag as i}from\"./enums.js\";import{isNumber as r}from\"./Utils.js\";const l=s.getLogger(\"esri.views.2d.engine.webgl\");function o(s){return r(s.minDataValue)&&r(s.maxDataValue)&&null!=s.minSize&&null!=s.maxSize?i.SIZE_MINMAX_VALUE:(s.expression&&\"view.scale\"===s.expression||s.valueExpression&&\"$view.scale\"===s.valueExpression)&&Array.isArray(s.stops)?i.SIZE_SCALE_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&(Array.isArray(s.stops)||\"levels\"in s&&s.levels)?i.SIZE_FIELD_STOPS:(null!=s.field||s.expression&&\"view.scale\"!==s.expression||s.valueExpression&&\"$view.scale\"!==s.valueExpression)&&null!=s.valueUnit?i.SIZE_UNIT_VALUE:(l.error(new e(\"mapview-bad-type\",\"Found invalid size VisualVariable\",s)),i.NONE)}export{o as getTypeOfSizeVisualVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n"],"sourceRoot":""}