{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@arcgis/core/chunks/_rollupPluginBabelHelpers.js","../node_modules/@arcgis/core/layers/ogc/ogcFeatureUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js"],"names":["i","s","c","o","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","r","e","type","features","t","f","coordinates","geometryType","objectIdField","u","geometry","l","properties","id","y","a","d","p","n","length","push","S","g","m","b","j","h","G","w","P","F","lengths","coords","hasZ","M","I","data","crs","name","code","RegExp","test","T","Set","Number","NEGATIVE_INFINITY","Object","keys","filter","Math","max","has","delete","add","alias","fields","maxObjectId","objectIdFieldName","objectIdFieldType","unknownFields","Array","from","k","prototype","WeakMap","set","get","reduce","create","exec","call","this","groups","Symbol","replace","arguments","slice","apply","TypeError","constructor","value","writable","configurable","setPrototypeOf","__proto__","getLogger","links","$","href","signal","query","limit","customParameters","token","apiKey","headers","accept","timeInfo","find","unshift","editable","nullable","warn","message","details","field","jsonValues","indexOf","startTimeField","endTimeField","trackIdField","drawingInfo","x","v","N","authority","version","toLowerCase","GCS_NAD_1927","wkid","WGS84","parseInt","isNaN","WebMercator","q","fromJSON","O","capabilities","maxRecordCount","collection","layerDefinition","queryParameters","spatialReference","supportedCrs","num","start","timeExtent","where","objectIds","outSpatialReference","isWGS84","D","C","R","W","Z","datetime","startindex","K","L","rel","isInteger","numberMatched","numberReturned","J","_","globalIdField","A","hasM","E","U","B","z","isWebMercator","objectId","attributes","H","toJSON","Q","exceededTransferLimit","globalIdFieldName","xmin","ymin","xmax","ymax","end","toISOString","bbox","renderer","symbol","JSON","stringify","Function","description","attachment","isVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","editing","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateWithoutM","supportsUploadWithItemId","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsUpdateByAnonymous","supportsUpdateByOthers"],"mappings":"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","file":"static/js/35.b9a986b5.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";const o={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function r(e){return o[e]}function*i(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*s(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*c(e,o={}){const{geometryType:i,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&r(e.type)!==i)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const d=new t(e?p(new n,e,o):null,a,null,y);yield d}}function u(e){for(const t of e)if(t.length>2)return!0;return!1}function l(e){return!a(e)}function f(e){return a(e)}function a(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function y(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function p(e,t,n){switch(t.type){case\"LineString\":return d(e,t,n);case\"MultiLineString\":return g(e,t,n);case\"MultiPoint\":return m(e,t,n);case\"MultiPolygon\":return h(e,t,n);case\"Point\":return w(e,t,n);case\"Polygon\":return P(e,t,n)}}function d(e,t,n){return S(e,t.coordinates,n),e}function g(e,t,n){for(const o of t.coordinates)S(e,o,n);return e}function m(e,t,n){return S(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates){b(e,o[0],n);for(let t=1;t<o.length;t++)j(e,o[t],n)}return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){const o=t.coordinates;b(e,o[0],n);for(let r=1;r<o.length;r++)j(e,o[r],n);return e}function b(e,t,n){const o=y(t);l(o)?F(e,o,n):S(e,o,n)}function j(e,t,n){const o=y(t);f(o)?F(e,o,n):S(e,o,n)}function S(e,t,n){for(const o of t)G(e,o,n);e.lengths.push(t.length)}function F(e,t,n){for(let o=t.length-1;o>=0;o--)G(e,t[o],n);e.lengths.push(t.length)}function G(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function M(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function I(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],o=new Set,c=new Set;let l,f=!1,a=Number.NEGATIVE_INFINITY,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const h of i(e)){const{geometry:e,properties:t,id:i}=h;if(!e||(d||(d=r(e.type)),r(e.type)===d)){if(!f){f=u(s(e))}if(p||(p=null!=i,p&&(l=typeof i,\"number\"===l&&(y=Object.keys(t).filter((e=>t[e]===i))))),p&&\"number\"===l&&null!=i&&(a=Math.max(a,i),y.length>1?y=y.filter((e=>t[e]===i)):1===y.length&&(y=t[y[0]]===i?y:[])),!g&&t){let e=!0;for(const r in t){if(o.has(r))continue;const i=t[r];if(null==i){e=!1,c.add(r);continue}const s=M(i);\"unknown\"!==s?(c.delete(r),o.add(r),n.push({name:r,alias:r,type:s})):c.add(r)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const r of n)r.name===m&&(r.type=\"esriFieldTypeOID\");return{fields:n,geometryType:d,hasZ:f,maxObjectId:Math.max(0,a),objectIdFieldName:m,objectIdFieldType:l,unknownFields:Array.from(c)}}function k(e,t){return Array.from(c(i(e),t))}export{k as createOptimizedFeatures,r as getGeometryType,T as inferLayerProperties,I as validateGeoJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction t(){t=function(t,e){return new c(t,void 0,e)};var n=RegExp.prototype,o=new WeakMap;function c(t,e,n){var u=new RegExp(t,e);return o.set(u,n||o.get(t)),r(u,c.prototype)}function u(t,e){var r=o.get(e);return Object.keys(r).reduce((function(e,n){return e[n]=t[r[n]],e}),Object.create(null))}return e(c,RegExp),c.prototype.exec=function(t){var e=n.exec.call(this,t);return e&&(e.groups=u(e,this)),e},c.prototype[Symbol.replace]=function(t,e){if(\"string\"==typeof e){var r=o.get(this);return n[Symbol.replace].call(this,t,e.replace(/\\$<([^>]+)>/g,(function(t,e){return\"$\"+r[e]})))}if(\"function\"==typeof e){var c=this;return n[Symbol.replace].call(this,t,(function(){var t=arguments;return\"object\"!=typeof t[t.length-1]&&(t=[].slice.call(t)).push(u(t,c)),e.apply(this,t)}))}return n[Symbol.replace].call(this,t,e)},t.apply(this,arguments)}function e(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}export{t as _};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/_rollupPluginBabelHelpers.js\";import\"../../geometry.js\";import t from\"../../request.js\";import i from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import{isNone as r,unwrapOr as a,isSome as o}from\"../../core/maybe.js\";import{WGS84 as s,equals as l}from\"../../geometry/support/spatialReferenceUtils.js\";import{project as c}from\"../../geometry/support/webMercatorUtils.js\";import{convertToFeatureSet as d,convertToGeometry as u,convertFromGeometry as p}from\"../graphics/featureConversionUtils.js\";import m from\"../graphics/OptimizedFeatureSet.js\";import{validateGeoJSON as f,inferLayerProperties as g,createOptimizedFeatures as y}from\"../graphics/sources/geojson/geojson.js\";import{createDrawingInfo as w}from\"../graphics/sources/support/clientSideDefaults.js\";import h from\"../support/FieldsIndex.js\";import{kebabDict as b}from\"../support/fieldType.js\";import j from\"../../rest/support/FeatureSet.js\";import F from\"../../geometry/SpatialReference.js\";const I=n.getLogger(\"esri.layers.graphics.sources.ogcfeature\");async function T(e,n,a={},o=5){const{links:s}=e,l=$(s,\"items\",\"application/geo+json\")||$(s,\"http://www.opengis.net/def/rel/ogc/1.0/items\",\"application/geo+json\");if(r(l))throw new i(\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{data:c}=await t(l.href,{signal:a.signal,query:{limit:o,...a.customParameters,token:a.apiKey},headers:{accept:\"application/geo+json\"}});await f(c);const d=g(c,{geometryType:n.geometryType}),u=n.fields||d.fields||[],p=null!=n.hasZ?n.hasZ:d.hasZ,m=d.geometryType,y=n.objectIdField||d.objectIdFieldName||\"OBJECTID\";let j=n.timeInfo;const F=u.find((e=>e.name===y));if(!F){if(!d.objectIdFieldType)throw new i(\"ogc-feature-layer:missing-feature-id\",\"Collection geojson require a feature id as a unique identifier\");u.unshift({name:y,alias:y,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}else F.type=\"esriFieldTypeOID\",F.editable=!1,F.nullable=!1;if(y!==d.objectIdFieldName){const e=u.find((e=>e.name===d.objectIdFieldName));e&&(e.type=\"esriFieldTypeInteger\")}if(!m)throw new i(\"ogc-feature-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");u===d.fields&&d.unknownFields.length>0&&I.warn({name:\"ogc-feature-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:d.unknownFields}});for(const t of u){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),\"esriFieldTypeOID\"!==t.type&&\"esriFieldTypeGlobalID\"!==t.type&&(t.editable=null==t.editable||!!t.editable,t.nullable=null==t.nullable||!!t.nullable),!t.name)throw new i(\"ogc-feature-layer:invalid-field-name\",\"field name is missing\",{field:t});if(-1===b.jsonValues.indexOf(t.type))throw new i(\"ogc-feature-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}if(j){const e=new h(u);if(j.startTimeField){const t=e.get(j.startTimeField);t?(j.startTimeField=t.name,t.type=\"esriFieldTypeDate\"):j.startTimeField=null}if(j.endTimeField){const t=e.get(j.endTimeField);t?(j.endTimeField=t.name,t.type=\"esriFieldTypeDate\"):j.endTimeField=null}if(j.trackIdField){const t=e.get(j.trackIdField);t?j.trackIdField=t.name:(j.trackIdField=null,I.warn({name:\"ogc-feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:j}}))}j.startTimeField||j.endTimeField||(I.warn({name:\"ogc-feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:j}}),j=null)}return{drawingInfo:w(m),geometryType:m,fields:u,hasZ:!!p,objectIdField:y,timeInfo:j}}async function k(e,n={}){const{links:a}=e,o=$(a,\"data\",\"application/json\")||$(a,\"http://www.opengis.net/def/rel/ogc/1.0/data\",\"application/json\");if(r(o))throw new i(\"ogc-feature-layer:missing-collections-page\",\"Missing collections url\");const{apiKey:s,customParameters:l,signal:c}=n,{data:d}=await t(o.href,{signal:c,headers:{accept:\"application/json\"},query:{...l,token:s}});return d}async function S(e,n={}){const{links:a}=e,o=$(a,\"conformance\",\"application/json\")||$(a,\"http://www.opengis.net/def/rel/ogc/1.0/conformance\",\"application/json\");if(r(o))throw new i(\"ogc-feature-layer:missing-conformance-page\",\"Missing conformance url\");const{apiKey:s,customParameters:l,signal:c}=n,{data:d}=await t(o.href,{signal:c,headers:{accept:\"application/json\"},query:{...l,token:s}});return d}async function x(e,i={}){const{apiKey:n,customParameters:r,signal:a}=i,{data:o}=await t(e,{signal:a,headers:{accept:\"application/json\"},query:{...r,token:n}});return o}async function v(e,i={}){const n=\"application/vnd.oai.openapi+json;version=3.0\",a=$(e.links,\"service-desc\",n);if(r(a))return I.warn(\"ogc-feature-layer:missing-openapi-page\",\"The OGC API-Features server does not have an OpenAPI page.\"),null;const{apiKey:o,customParameters:s,signal:l}=i,{data:c}=await t(a.href,{signal:l,headers:{accept:n},query:{...s,token:o}});return c}function N(t){const i=e(/^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(.*)\\/(.*)\\/(.*)$/i,{authority:1,version:2,code:3}).exec(t),n=null==i?void 0:i.groups;if(!n)return null;const{authority:r,code:a}=n;switch(r.toLowerCase()){case\"ogc\":switch(a.toLowerCase()){case\"crs27\":return F.GCS_NAD_1927;case\"crs83\":return new F({wkid:4269});case\"crs84\":case\"crs84h\":return F.WGS84;default:return null}case\"esri\":case\"epsg\":{const e=Number.parseInt(a,10);return Number.isNaN(e)?null:900913===e?F.WebMercator:new F({wkid:e})}default:return null}}async function q(e,t,i){const n=await M(e,t,i);return j.fromJSON(n)}async function M(e,t,i){const n=await O(e,t,i);return d(n)}async function O(e,n,o){const{capabilities:{query:{maxRecordCount:l}},collection:d,layerDefinition:f,queryParameters:{apiKey:g,customParameters:w},spatialReference:h,supportedCrs:b}=e,{links:j}=d,I=$(j,\"items\",\"application/geo+json\")||$(j,\"http://www.opengis.net/def/rel/ogc/1.0/items\",\"application/geo+json\");if(r(I))throw new i(\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{geometry:T,num:k,start:S,timeExtent:x,where:v}=n;if(n.objectIds)throw new i(\"ogc-feature-layer:query-by-objectids-not-supported\",\"Queries with objectids are not supported\");const N=F.fromJSON(h),q=a(n.outSpatialReference,N),M=q.isWGS84?null:P(q,b),O=G(T,b),D=C(x),R=W(v),Z=null!=k?k:null!=S&&void 0!==S?10:l,{data:K}=await t(I.href,{...o,query:{...w,...O,crs:M,datetime:D,query:R,limit:Z,startindex:S,token:g},headers:{accept:\"application/geo+json\"}});let L=!1;if(K.links){L=!!K.links.find((e=>\"next\"===e.rel))}!L&&Number.isInteger(K.numberMatched)&&Number.isInteger(K.numberReturned)&&(L=K.numberReturned<K.numberMatched);const{fields:J,globalIdField:_,hasM:A,hasZ:E,objectIdField:U}=f,B=f.geometryType,z=y(K,{geometryType:B,hasZ:E,objectIdField:U});if(!M&&q.isWebMercator)for(const t of z)if(t.geometry){const e=u(t.geometry,B,E,!1);e.spatialReference=F.WGS84,t.geometry=p(c(e,q))}for(const t of z)t.objectId=t.attributes[U];const H=M||!M&&q.isWebMercator?q.toJSON():s,Q=new m;return Q.exceededTransferLimit=L,Q.features=z,Q.fields=J,Q.geometryType=B,Q.globalIdFieldName=_,Q.hasM=A,Q.hasZ=E,Q.objectIdFieldName=U,Q.spatialReference=H,Q}function D(e){return o(e)&&\"extent\"===e.type}function P(e,t){return t.find((t=>{const i=N(t);return l(i,e)}))}function R(e){const{xmin:t,ymin:i,xmax:n,ymax:r}=e;return`${t},${i},${n},${r}`}function C(e){if(r(e))return null;const{start:t,end:i}=e;return`${o(t)?t.toISOString():\"..\"}/${o(i)?i.toISOString():\"..\"}`}function W(e){return r(e)||!e||\"1=1\"===e?null:e}function G(e,t){if(!D(e))return null;const{spatialReference:i}=e;if(!i||i.isWGS84)return{bbox:R(e)};const n=P(i,t);return n?{bbox:R(e),\"bbox-crs\":n}:i.isWebMercator?{bbox:R(c(e,F.WGS84))}:null}function $(e,t,i){return e.find((e=>e.rel===t&&e.type===i))||e.find((e=>e.rel===t&&!e.type))}export{T as getCollectionDefinition,k as getServerCollections,S as getServerConformance,x as getServerLandingPage,v as getServerOpenApi,N as getSpatialReference,q as queryFeatureSet,M as queryFeatureSetJSON,O as queryOptimizedFeatureSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{queryCapabilities as e}from\"../../data/QueryEngineCapabilities.js\";import{defaultPointSymbolJSON as r,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?r:\"esriGeometryPolyline\"===t?p:o}}}function n(s,e){if(t(\"csp-restrictions\"))return()=>({[e]:null,...s});try{let t=`this.${e} = null;`;for(const e in s){t+=`this${e.indexOf(\".\")?`[\"${e}\"]`:`.${e}`} = ${JSON.stringify(s[e])};`}const r=new Function(t);return()=>new r}catch(r){return()=>({[e]:null,...s})}}function i(t={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:s(t)}}]}function a(t,s){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:s,supportsDelete:s,supportsEditing:s,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:s,supportsExceedsLimitStatistics:!0},query:e,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:s,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}export{a as createCapabilities,n as createDefaultAttributesFunction,i as createDefaultTemplate,u as createDrawingInfo};\n"],"sourceRoot":""}